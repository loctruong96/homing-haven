{"remainingRequest":"C:\\Users\\kidab\\csci\\homing-haven\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\kidab\\csci\\homing-haven\\src\\components\\Community.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\kidab\\csci\\homing-haven\\src\\components\\Community.vue","mtime":1584070634268},{"path":"C:\\Users\\kidab\\csci\\homing-haven\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kidab\\csci\\homing-haven\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnCiAgICBpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcKICAgIGltcG9ydCB7IFZ1ZXBlclNsaWRlcywgVnVlcGVyU2xpZGUgfSBmcm9tICd2dWVwZXJzbGlkZXMnCiAgICBpbXBvcnQgJ3Z1ZXBlcnNsaWRlcy9kaXN0L3Z1ZXBlcnNsaWRlcy5jc3MnCiAgICBjb25zdCBmYiA9IHJlcXVpcmUoJy4uL2ZpcmViYXNlQ29uZmlnLmpzJyk7CiAgICBpbXBvcnQgVnVlVGFnc0lucHV0IGZyb20gJ0Bqb2htdW4vdnVlLXRhZ3MtaW5wdXQnOwogICAgaW1wb3J0IExpc3RJbnRlcmVzdHMgZnJvbSAiQC9jb21wb25lbnRzL0xpc3RJbnRlcmVzdHMiCiAgICBpbXBvcnQgTGlzdENvbW11bml0aWVzIGZyb20gIkAvY29tcG9uZW50cy9MaXN0Q29tbXVuaXRpZXMiOwogICAgaW1wb3J0IEFkZEludGVyZXN0IGZyb20gIkAvY29tcG9uZW50cy9BZGRJbnRlcmVzdCIKICAgIGltcG9ydCBBZGRDb21tdW5pdHkgZnJvbSAiQC9jb21wb25lbnRzL0FkZENvbW11bml0eSI7CmV4cG9ydCBkZWZhdWx0IHsKICAgIGJlZm9yZUNyZWF0ZSgpIHsKICAgICAgICB0aGlzLmxvb2tlZCA9IGZhbHNlOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q29tbXVuaXR5UHJvZmlsZScsIGZhbHNlKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEN1cnJlbnRDb21tdW5pdHknLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdmZXRjaENvbW11bml0eVByb2ZpbGUnKTsKCiAgICB9LAogICAgYmVmb3JlVXBkYXRlKCkgewogICAgICAgIHRoaXMubG9va2VkID0gdHJ1ZTsKICAgICAgICAvLyBpZiBsb2dnZWQgaW4sIGZpbmQgaWYgdGhlIHVzZXIgaXMgYSBvd25lciBhbmQgb3IgbW9kZXJhdG9yCiAgICAgICAgaWYodGhpcy51c2VyUHJvZmlsZS5uYW1lICE9PSB1bmRlZmluZWQpewogICAgICAgICAgICBpZih0aGlzLmNvbW11bml0eVByb2ZpbGUub3duZXIgPT09IHRoaXMudXNlclByb2ZpbGUuZW1haWwpewogICAgICAgICAgICAgICAgdGhpcy5vd25lciA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5jb21tdW5pdHlQcm9maWxlLm1vZGVyYXRvcnMuaW5kZXhPZih0aGlzLnVzZXJQcm9maWxlLmVtYWlsKSAhPT0gLTEpewogICAgICAgICAgICAgICAgdGhpcy5hZG1pbiA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZS5jb21tdW5pdGllcy5tYXAoKGNvbSk9PnsKICAgICAgICAgICAgICAgIGlmIChjb20udGl0bGUgIT09IHVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgICAgaWYoY29tLnRpdGxlID09PSB0aGlzLmNvbW11bml0eVByb2ZpbGUubGluayl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYoIXRoaXMubG9hZGVkTW9kKXsKICAgICAgICAgICAgICAgIHRoaXMubW9kZXJhdG9ycyA9IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5tb2RlcmF0b3JzLm1hcCgobW9kKT0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4ge3RleHQ6IG1vZH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRNb2QgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgLi4ubWFwU3RhdGUoWydjb21tdW5pdHlQcm9maWxlJywgJ3VzZXJQcm9maWxlJ10pLAogICAgICAgIGN1cnJlbnRJbnRlcmVzdExlbihzdGF0ZSkgewogICAgICAgICAgICAvLyByZXR1cm4gc3RhdGUudXNlclByb2ZpbGUuaW50ZXJlc3RzLmxlbmd0aDsKICAgICAgICAgICAgcmV0dXJuIDQ7CiAgICAgICAgfQogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHBvc3Q6IHsKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBzbGlkZXM6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWQ6ICdzbGlkZS0wJywKICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8YiBzdHlsZT0iZm9udC1zaXplOiAxLjNlbTtjb2xvcjogIj5Gb29kIEFzc2lzdGFuY2U8L2I+JywKICAgICAgICAgICAgICAgICAgY29udGVudDogJ1RoaXMgaXMgdGhlIEZvb2QgQXNzaXN0YW5jZSBpbnRlcmVyc3QuJysKICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJmb29kQXNzaXN0YW5jZV9jYXJkIiAgY2xhc3M9ImJ1dHRvbiI+VmlldzwvYnV0dG9uPicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlkOiAnc2xpZGUtMScsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPGIgc3R5bGU9ImZvbnQtc2l6ZTogMS4zZW07Y29sb3I6ICI+SGVhbHRoIENhcmU8L2I+JywKICAgICAgICAgICAgICAgICAgY29udGVudDogJ1RoaXMgaXMgdGhlIEhlYWx0aGNhcmUgaW50ZXJlc3QuJysKICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJoZWFsdGhjYXJlX2NhcmQiICBjbGFzcz0iYnV0dG9uIj5WaWV3PC9idXR0b24+JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWQ6ICdzbGlkZS0yJywKICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8YiBzdHlsZT0iZm9udC1zaXplOiAxLjNlbTtjb2xvcjogIj5FZHVjYXRpb248L2I+JywKICAgICAgICAgICAgICAgICAgY29udGVudDogJ1RoaXMgaXMgdGhlIEVkdWNhdGlvbiBJbnRlcmVzdC4nKwogICAgICAgICAgICAgICAgICAgJzxicj48YnI+PGJ1dHRvbiBAY2xpY2s9ImVkdWNhdGlvbl9jYXJkIiAgY2xhc3M9ImJ1dHRvbiI+VmlldzwvYnV0dG9uPicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBpZDogJ3NsaWRlLTMnLAogICAgICAgICAgICAgICAgICB0aXRsZTogJzxiIHN0eWxlPSJmb250LXNpemU6IDEuM2VtO2NvbG9yOiAiPkxlZ2FsIEFzc2lzdGFuY2U8L2I+JywKICAgICAgICAgICAgICAgICAgY29udGVudDogJ1RoaXMgaXMgdGhlIExlZ2FsIEFzc2lzdGFuY2UuJysKICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJsZWdhbEFzc2lzdGFuY2VfY2FyZCIgIGNsYXNzPSJidXR0b24iPlZpZXc8L2J1dHRvbj4nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgc2xpZGVzX3JlY2M6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgaWQ6ICdzbGlkZS0wJywKICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8YiBzdHlsZT0iZm9udC1zaXplOiAxLjNlbTtjb2xvcjogIj5SZWNvbW1lbmRlZCBDYXRlZ29yeSAxPC9iPicsCiAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgZGVzY3JpcHRpb24nKwogICAgICAgICAgICAgICAgICAgJzxicj48YnI+PGJ1dHRvbiBAY2xpY2s9InJlY2MxX2NhcmQiICBjbGFzcz0iYnV0dG9uIj5WaWV3PC9idXR0b24+JwoKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlkOiAnc2xpZGUtMScsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPGIgc3R5bGU9ImZvbnQtc2l6ZTogMS4zZW07Y29sb3I6ICI+UmVjb21tZW5kZWQgQ2F0ZWdvcnkgMjwvYj4nLAogICAgICAgICAgICAgICAgICBjb250ZW50OiAnVGhpcyBpcyBhIGRlc2NyaXB0aW9uJysKICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJyZWNjMl9jYXJkIiAgY2xhc3M9ImJ1dHRvbiI+VmlldzwvYnV0dG9uPicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIGlkOiAnc2xpZGUtMicsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPGIgc3R5bGU9ImZvbnQtc2l6ZTogMS4zZW07Y29sb3I6ICI+UmVjb21tZW5kZWQgQ2F0ZWdvcnkgMzwvYj4nLAogICAgICAgICAgICAgICAgICBjb250ZW50OiAnVGhpcyBpcyBhIGRlc2NyaXB0aW9uJysKICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJyZWNjM19jYXJkIiAgY2xhc3M9ImJ1dHRvbiI+VmlldzwvYnV0dG9uPicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBpZDogJ3NsaWRlLTMnLAogICAgICAgICAgICAgICAgICB0aXRsZTogJzxiIHN0eWxlPSJmb250LXNpemU6IDEuM2VtO2NvbG9yOiAiPlJlY29tbWVuZGVkIENhdGVnb3J5IDQ8L2I+JywKICAgICAgICAgICAgICAgICAgY29udGVudDogJ1RoaXMgaXMgYSBkZXNjcmlwdGlvbicrCiAgICAgICAgICAgICAgICAgICAnPGJyPjxicj48YnV0dG9uIEBjbGljaz0icmVjYzRfY2FyZCIgIGNsYXNzPSJidXR0b24iPlZpZXc8L2J1dHRvbj4nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIHRhYmxlRGF0YTogW3sKICAgICAgICAgICAgICAgIHVzZXJOYW1lOiAndXNlcjE5OTknLAogICAgICAgICAgICAgICAgZGF0ZTogJzIwMTYtMDUtMDMnLAogICAgICAgICAgICAgICAgdGl0bGU6ICdGb29kIEJhbmsgaW4gV2VzdCBTZWF0dGxlJywKICAgICAgICAgICAgICAgIHVwdm90ZXM6IDQ1LAogICAgICAgICAgICAgICAgdGFnOiAnRm9vZCcKICAgICAgICAgICAgfSwgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB1c2VyTmFtZTogJ2xvY3RydW9uZzEyJywKICAgICAgICAgICAgICAgIGRhdGU6ICcyMDE2LTA1LTA2JywKICAgICAgICAgICAgICAgIHRpdGxlOiAnTWFzdGVyIGxpc3Qgb2YgbGlua3MgZm9yIGltbWlncmFudCBkb2N1bWVudGF0aW9uJywKICAgICAgICAgICAgICAgIHVwdm90ZXM6IDE1LAogICAgICAgICAgICAgICAgdGFnOiAnRG9jdW1lbnRhdGlvbicKICAgICAgICAgICAgfSwgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVzZXJOYW1lOiAnZmVsaXhUcmFuNDQnLAogICAgICAgICAgICAgICAgZGF0ZTogJzIwMTYtMDktMDMnLAogICAgICAgICAgICAgICAgdGl0bGU6ICdMb29raW5nIGZvciBzY2hvbGFyc2hpcHM/IEdvIHRvIENhcHBleC5jb20nLAogICAgICAgICAgICAgICAgdXB2b3RlczogODgsCiAgICAgICAgICAgICAgICB0YWc6ICdFZHVjYXRpb24nCiAgICAgICAgICAgIH0sIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB1c2VyTmFtZTogJ2tpZGFicmVhNDgnLAogICAgICAgICAgICAgICAgZGF0ZTogJzIwMTktMTItMDQnLAogICAgICAgICAgICAgICAgdGl0bGU6ICdGWUk6IFRoaXMgZHJ1ZyBzdG9yZSBpcyBkb2luZyBhIDE1JSBvZmYgZGVhbCBvbiBhbGwgaXRlbXMgcmlnaHQgbm93IScsCiAgICAgICAgICAgICAgICB1cHZvdGVzOiA5OSwKICAgICAgICAgICAgICAgIHRhZzogJ0hlYWx0aGNhcmUnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHVzZXJOYW1lOiAnZXNwZXJpYTk3JywKICAgICAgICAgICAgICAgIGRhdGU6ICcyMDE3LTA1LTIxJywKICAgICAgICAgICAgICAgIHRpdGxlOiAnVGhpcyBjbGluaWMgZG93bnRvd24gb2ZmZXJzIGZyZWUgU1REIHRlc3RpbmchJywKICAgICAgICAgICAgICAgIHVwdm90ZXM6IDY5LAogICAgICAgICAgICAgICAgdGFnOiAnSGVhbHRoY2FyZScKICAgICAgICAgICAgfQogICAgICAgICAgICBdLAogICAgICAgICAgICBzdWJzY3JpYmVkOiBmYWxzZSwKICAgICAgICAgICAgbG9hZGVkTW9kOiBmYWxzZSwKICAgICAgICAgICAgbmV3T3duZXI6ICcnLAogICAgICAgICAgICBsb29rZWQ6IGZhbHNlLAogICAgICAgICAgICBob21lOiB0cnVlLAogICAgICAgICAgICByZXNvdXJjZXM6IGZhbHNlLAogICAgICAgICAgICBwb3N0SW5mbzogZmFsc2UsCiAgICAgICAgICAgIGFib3V0OiBmYWxzZSwKICAgICAgICAgICAgYWRtaW46IGZhbHNlLAogICAgICAgICAgICBhZG1pblNlbGVjdDogZmFsc2UsCiAgICAgICAgICAgIG93bmVyOiBmYWxzZSwKICAgICAgICAgICAgcHJvcGVyTmFtZTogL15bYS16QS1aXSsoKFtcJywuIC1dW2EtekEtWiBdKT9bYS16QS1aXSopKiQvLAogICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICBjaXR5OiAnJywKICAgICAgICAgICAgc3RhdGU6ICcnLAogICAgICAgICAgICBjb3VudHJ5OiAnJywKICAgICAgICAgICAgcnVsZXM6ICcnLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgICAgIGVycm9yTXNnOiAnJywKICAgICAgICAgICAgbW9kZXJhdG9yOiAnJywKICAgICAgICAgICAgbW9kZXJhdG9yczogW10sCiAgICAgICAgICAgIHNob3dTdWNjZXNzOiBmYWxzZSwKICAgICAgICAgICAgc2hvd1N1Y2Nlc3NJbnQ6IGZhbHNlLAogICAgICAgICAgICBpbnRlcmVzdHM6IFsKICAgICAgICAgICAgXSwKICAgICAgICAgICAgY29tbXVuaXRpZXM6IFsKICAgICAgICAgICAgXSwKICAgICAgICAgICAgdmFsaWRhdGlvbjogW3sKICAgICAgICAgICAgICAgIGNsYXNzZXM6ICd2YWxpZC1lbWFpbCcsCiAgICAgICAgICAgICAgICBydWxlOiAvXlx3KyhbXC4tXT9cdyspKkBcdysoW1wuLV0/XHcrKSooXC5cd3syLDN9KSskLywKICAgICAgICAgICAgICAgIGRpc2FibGVBZGQ6IHRydWUsCiAgICAgICAgICAgIH1dLAogICAgICAgICAgICB1c2VySW5mbzogIlVzZXIgMTIzNDUiLAogICAgICAgICAgICBwb3N0RGF0ZTogIkFwcmlsIDIwLCAyMDE4IiwKICAgICAgICAgICAgcG9zdFRpdGxlOiAiRm9vZCBEcml2ZSBhdCBXZXN0ZmllbGQgRm9vZCBCYW5rIiwKICAgICAgICAgICAgcG9zdERlc2M6ICJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LCBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gVXQgZW5pbSBhZCBtaW5pbSB2ZW5pYW0sIHF1aXMgbm9zdHJ1ZCBleGVyY2l0YXRpb24gdWxsYW1jbyBsYWJvcmlzIG5pc2kgdXQgYWxpcXVpcCBleCBlYSBjb21tb2RvIGNvbnNlcXVhdC4gRHVpcyBhdXRlIGlydXJlIGRvbG9yIGluIHJlcHJlaGVuZGVyaXQgaW4gdm9sdXB0YXRlIHZlbGl0IGVzc2UgY2lsbHVtIGRvbG9yZSBldSBmdWdpYXQgbnVsbGEgcGFyaWF0dXIuIiwKICAgICAgICAgICAgcG9zdFZvdGVzOiA2OCwKICAgICAgICAgICAgc29ydGJ5OiBbIkZvb2QiLCAiRWR1Y2F0aW9uIiwgIkRvY3VtZW50YXRpb24iLCJIZWFsdGhjYXJlIl0sCiAgICAgICAgICAgIGNhcmRzOiBbe3RpdGxlOiAiRm9vZCBEcml2ZSBhdCBXZXN0ZmllbGQgRm9vZCBCYW5rIiwKICAgICAgICAgICAgZGVzY3JpcHRpb246ICJzdHVmZiIsIHZvdGVzOiA2OCwgZGF0ZTogIkFwcmlsIDIwLCAyMDE4IiwgdXNlcjogIlVzZXIgMTIzNDUifSx7dGl0bGU6ICJGb29kIERyaXZlIGF0IFdlc3RmaWVsZCBGb29kIEJhbmsiLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogInN0dWZmIiwgdm90ZXM6IDY4LCBkYXRlOiAiQXByaWwgMjAsIDIwMTgiLCB1c2VyOiAiVXNlciA2Nzg5In1dCgogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIGhhbmRsZVNlbGVjdChrZXksIGtleVBhdGgpIHsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGtleSwga2V5UGF0aCk7CiAgICAgICAgICAgICAgICBpZihrZXkgPT09ICcjaG9tZScpewogICAgICAgICAgICAgICAgICAgIHRoaXMuaG9tZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFib3V0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZG1pblNlbGVjdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEluZm8gPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYoa2V5ID09PSAnI3Jlc291cmNlcycpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc291cmNlcyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hYm91dCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRtaW5TZWxlY3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RJbmZvID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYoa2V5ID09PSAnI3Bvc3RJbmZvJykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc291cmNlcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RJbmZvID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmKGtleSA9PT0gJyNhYm91dCcpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhvbWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc291cmNlcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWJvdXQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRtaW5TZWxlY3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RJbmZvID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoa2V5ID09PSAnI2FkbWluJyl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob21lID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFib3V0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZG1pblNlbGVjdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0SW5mbyA9IGZhbHNlOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKGtleSA9PT0gJyNzdWJzY3JpYmUnKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlKCkKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihrZXkgPT09ICcjdW5zdWJzY3JpYmUnKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgcmVzZXREYXRlRmlsdGVyKCkgewogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5maWx0ZXJUYWJsZS5jbGVhckZpbHRlcignZGF0ZScpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGVhckZpbHRlcigpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMuZmlsdGVyVGFibGUuY2xlYXJGaWx0ZXIoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9ybWF0dGVyKHJvdywgY29sdW1uKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcm93LmFkZHJlc3M7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbHRlclRhZyh2YWx1ZSwgcm93KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcm93LnRhZyA9PT0gdmFsdWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpbHRlckhhbmRsZXIodmFsdWUsIHJvdywgY29sdW1uKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IGNvbHVtblsncHJvcGVydHknXTsKICAgICAgICAgICAgICAgIHJldHVybiByb3dbcHJvcGVydHldID09PSB2YWx1ZTsKICAgICAgICAgICAgfSwKCgoKCgogICAgICAgICAgIAogICAgICAgICBlcnJvckNoZWNrKCl7CiAgICAgICAgICAgIGxldCBlcnJvciA9IGZhbHNlOwogICAgICAgICAgICBsZXQgZm91bmRPd25lciA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLm1vZGVyYXRvcnMubWFwKChtb2QpID0+IHsKICAgICAgICAgICAgICAgIGlmKG1vZC50ZXh0ID09PSB0aGlzLmNvbW11bml0eVByb2ZpbGUub3duZXIpewogICAgICAgICAgICAgICAgICAgIGZvdW5kT3duZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYoIWZvdW5kT3duZXIpewogICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1zZyA9ICJDYW4gbm90IHJlbW92ZSBvd25lciBmcm9tIGFkbWluLiIKICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMuaW50ZXJlc3RzLmxlbmd0aCA+IDMwKXsKICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAiV2UgY3VycmVudGx5IG9ubHkgYWxsb3cgYSBjb21tdW5pdHkgdG8gaGF2ZSB1cCB0byAzMCBpbnRlcmVzdHMuIgogICAgICAgICAgICB9IGVsc2UgaWYoIXRoaXMucHJvcGVyTmFtZS50ZXN0KHRoaXMubmFtZSkgJiYgdGhpcy5uYW1lICE9PSAnJyl7CiAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTXNnID0gIkludmFsaWQgbmFtaW5nIGZvcm1hdC4gQWxwaGEgY2hhcmFjdGVycyBhbmQgc3BhY2Ugb25seS4iCiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLm1vZGVyYXRvcnMubGVuZ3RoICE9PSB0aGlzLmNvbW11bml0eVByb2ZpbGUubW9kZXJhdG9ycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ1lvdSBhcmUgYWJvdXQgdG8gdXBkYXRlIG1vZGVyYXRvcnMgYXMgYW4gb3duZXIuIENvbnRpbnVlPycsICdXYXJuaW5nJywgewogICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnT0snLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWwnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgICAgICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdCA9IGF3YWl0IHRoaXMudXBkYXRlQ29tbXVuaXR5UHJvZmlsZSgpOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZXJhdG9ycyB1cGRhdGUgY2FuY2VsZWQnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb21tdW5pdHlQcm9maWxlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIHVwZGF0ZUNvbW11bml0eVByb2ZpbGUoKSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAiIjsKICAgICAgICAgICAgLy8gY2hlY2sgaWYgYWxsIGVtYWlscyBhcmUgYWN0dWFsbHkgdmFsaWQKICAgICAgICAgICAgdGhpcy5sb29rZWQgPSBmYWxzZTsKICAgICAgICAgICAgY29uc3QgdXNlclJlZiA9IGZiLnVzZXJzQ29sbGVjdGlvbjsKICAgICAgICAgICAgbGV0IHZhbGlkID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgZmluYWxNb2RzID0gW107CiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMubW9kZXJhdG9ycy5tYXAoYXN5bmMgKG1vZCkgPT4gewogICAgICAgICAgICAgICAgZmluYWxNb2RzLnB1c2gobW9kLnRleHQpOwogICAgICAgICAgICAgICAgY29uc3QgcXVlcnkgID0gYXdhaXQgdXNlclJlZi53aGVyZSgiZW1haWwiLCAiPT0iLCBtb2QudGV4dCk7CiAgICAgICAgICAgICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgcXVlcnkuZ2V0KCk7CiAgICAgICAgICAgICAgICBpZihxdWVyeVNuYXBzaG90LnNpemUgPT09IDApewogICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29rZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSBgQ2Fubm90IGZpbmQgdXNlciBhc3NvY2lhdGVkIHdpdGggJHttb2QudGV4dH0uYAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIGlmKHZhbGlkKXsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVDb21tdW5pdHlQcm9maWxlJywgewogICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSAhPT0gJycgPyB0aGlzLm5hbWUgOiB0aGlzLmNvbW11bml0eVByb2ZpbGUubmFtZSwKICAgICAgICAgICAgICAgICAgICBydWxlczogdGhpcy5ydWxlcyAhPT0gJycgPyB0aGlzLnJ1bGVzOiB0aGlzLmNvbW11bml0eVByb2ZpbGUucnVsZXMsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24gIT09ICcnID8gdGhpcy5kZXNjcmlwdGlvbjogdGhpcy5jb21tdW5pdHlQcm9maWxlLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgIGNpdHk6IHRoaXMuY2l0eSAhPT0gJycgPyB0aGlzLmNpdHk6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5jaXR5LAogICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlICE9PSAnJyA/IHRoaXMuc3RhdGU6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiB0aGlzLmNvdW50cnkgIT09ICcnID8gdGhpcy5jb3VudHJ5OiB0aGlzLmNvbW11bml0eVByb2ZpbGUuY291bnRyeSwKICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5pbnRlcmVzdHMsCiAgICAgICAgICAgICAgICAgICAgbGluazogdGhpcy5jb21tdW5pdHlQcm9maWxlLmxpbmssCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZE9uOiB0aGlzLmNvbW11bml0eVByb2ZpbGUuY3JlYXRlZE9uLAogICAgICAgICAgICAgICAgICAgIG1vZGVyYXRvcnM6IGZpbmFsTW9kcywKICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyczogdGhpcy5jb21tdW5pdHlQcm9maWxlLnN1YnNjcmliZXJzLAogICAgICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLmNvbW11bml0eVByb2ZpbGUub3duZXIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9ICcnOwogICAgICAgICAgICAgICAgdGhpcy50aXRsZSA9ICcnOwogICAgICAgICAgICAgICAgdGhpcy5jaXR5ID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dTdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnNob3dTdWNjZXNzID0gZmFsc2UgfSwgMjAwMCkKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdmFsaWQ7CiAgICAgICAgfSwKICAgICAgICByZW1vdmVJbnRlcmVzdChpZCkgewogICAgICAgICAgICB0aGlzLmNvbW11bml0eVByb2ZpbGUuaW50ZXJlc3RzID0gdGhpcy5jb21tdW5pdHlQcm9maWxlLmludGVyZXN0cy5maWx0ZXIodD0+IHQuaWQgIT09IGlkKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVDb21tdW5pdHlJbnRlcmVzdEZpcmViYXNlKCk7CiAgICAgICAgfSwKICAgICAgICBhZGRJbnRlcmVzdChpbnRlcmVzdCkgewogICAgICAgICAgICB0aGlzLmNvbW11bml0eVByb2ZpbGUuaW50ZXJlc3RzLnB1c2goaW50ZXJlc3QpOwogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbW11bml0eUludGVyZXN0RmlyZWJhc2UoKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZUNvbW11bml0eShpZCkgewogICAgICAgICAgICB0aGlzLmNvbW11bml0aWVzID0gdGhpcy5jb21tdW5pdGllcy5maWx0ZXIodD0+IHQuaWQgIT09IGlkKQogICAgICAgIH0sCiAgICAgICAgYWRkQ29tbXVuaXR5KGNvbW11bml0eSkgewogICAgICAgICAgICB0aGlzLmNvbW11bml0aWVzLnB1c2goY29tbXVuaXR5KQogICAgICAgIH0sCiAgICAgICAgdXBkYXRlQ29tbXVuaXR5SW50ZXJlc3RGaXJlYmFzZSgpIHsKICAgICAgICAgICAgY29uc3QgdXBkYXRlZEludGVyZXN0ID0gW107CiAgICAgICAgICAgIGxldCBjb3VudGVyID0gMDsKICAgICAgICAgICAgdGhpcy5jb21tdW5pdHlQcm9maWxlLmludGVyZXN0cy5tYXAoKGludGVyZXN0KSA9PiB7CiAgICAgICAgICAgICAgICB1cGRhdGVkSW50ZXJlc3QucHVzaCh7aWQ6Y291bnRlciwgdGl0bGU6IGludGVyZXN0LnRpdGxlLCBjb21wbGV0ZWQ6IGZhbHNlfSk7CiAgICAgICAgICAgICAgICBjb3VudGVyICs9IDE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXBkYXRlQ29tbXVuaXR5UHJvZmlsZScsIHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5uYW1lLAogICAgICAgICAgICAgICAgcnVsZXM6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5ydWxlcywKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNvbW11bml0eVByb2ZpbGUuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICBjaXR5OiAgdGhpcy5jb21tdW5pdHlQcm9maWxlLmNpdHksCiAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy5jb21tdW5pdHlQcm9maWxlLnN0YXRlLAogICAgICAgICAgICAgICAgY291bnRyeTogdGhpcy5jb21tdW5pdHlQcm9maWxlLmNvdW50cnksCiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IHVwZGF0ZWRJbnRlcmVzdCwKICAgICAgICAgICAgICAgIGNyZWF0ZWRPbjogdGhpcy5jb21tdW5pdHlQcm9maWxlLmNyZWF0ZWRPbiwKICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzOiB0aGlzLmNvbW11bml0eVByb2ZpbGUuc3Vic2NyaWJlcnMsCiAgICAgICAgICAgICAgICBsaW5rOiB0aGlzLmNvbW11bml0eVByb2ZpbGUubGluaywKICAgICAgICAgICAgICAgIG1vZGVyYXRvcnM6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5tb2RlcmF0b3JzLAogICAgICAgICAgICAgICAgb3duZXI6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5vd25lciwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3NJbnQgPSB0cnVlOwoKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuc2hvd1N1Y2Nlc3NJbnQgPSBmYWxzZSB9LCAyMDAwKQogICAgICAgIH0sCiAgICAgICAgc3Vic2NyaWJlKCl7CiAgICAgICAgICAgIHRoaXMudXNlclByb2ZpbGUuY29tbXVuaXRpZXMucHVzaCh7aWQ6MCwgdGl0bGU6IHRoaXMuY29tbXVuaXR5UHJvZmlsZS5saW5rLCBjb21wbGV0ZWQ6IGZhbHNlfSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlVXNlclN1YnNjcmlwdGlvbigpOwogICAgICAgIH0sCiAgICAgICAgdW5zdWJzY3JpYmUoKXsKICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZS5jb21tdW5pdGllcyA9IHRoaXMudXNlclByb2ZpbGUuY29tbXVuaXRpZXMuZmlsdGVyKHQ9PiB0LnRpdGxlICE9PSB0aGlzLmNvbW11bml0eVByb2ZpbGUubGluayk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlVXNlclN1YnNjcmlwdGlvbigpOwogICAgICAgIH0KICAgICAgICAsCiAgICAgICAgdXBkYXRlVXNlclN1YnNjcmlwdGlvbigpIHsKICAgICAgICAgICAgY29uc3QgdXBkYXRlZENvbW11bml0aWVzID0gW107CiAgICAgICAgICAgIGxldCBjb3VudGVyID0gMDsKICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZS5jb21tdW5pdGllcy5tYXAoKGNvbW11bml0eSkgPT4gewogICAgICAgICAgICAgICAgdXBkYXRlZENvbW11bml0aWVzLnB1c2goe2lkOmNvdW50ZXIsIHRpdGxlOiBjb21tdW5pdHkudGl0bGUsIGNvbXBsZXRlZDogZmFsc2V9KTsKICAgICAgICAgICAgICAgIGNvdW50ZXIgKz0gMTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVQcm9maWxlJywgewogICAgICAgICAgICAgICAgbmFtZTogdGhpcy51c2VyUHJvZmlsZS5uYW1lLAogICAgICAgICAgICAgICAgdGl0bGU6IHRoaXMudXNlclByb2ZpbGUudGl0bGUsCiAgICAgICAgICAgICAgICBjaXR5OiAgdGhpcy51c2VyUHJvZmlsZS5jaXR5LAogICAgICAgICAgICAgICAgc3RhdGU6IHRoaXMudXNlclByb2ZpbGUuc3RhdGUsCiAgICAgICAgICAgICAgICBjb3VudHJ5OiB0aGlzLnVzZXJQcm9maWxlLmNvdW50cnksCiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IHRoaXMudXNlclByb2ZpbGUuaW50ZXJlc3RzLAogICAgICAgICAgICAgICAgY29tbXVuaXRpZXM6IHVwZGF0ZWRDb21tdW5pdGllcywKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIH0sCiAgICBjb21wb25lbnRzOiB7CiAgICAgICAgVnVlcGVyU2xpZGVzLAogICAgICAgIFZ1ZXBlclNsaWRlLAogICAgICAgIExpc3RJbnRlcmVzdHMsCiAgICAgICAgQWRkSW50ZXJlc3QsCiAgICAgICAgQWRkQ29tbXVuaXR5LAogICAgICAgIExpc3RDb21tdW5pdGllcywKICAgICAgICBWdWVUYWdzSW5wdXR9Cgp9Cg=="},{"version":3,"sources":["Community.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Community.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div id=\"community\" >\r\n        <transition name=\"fade\">\r\n            <div v-if=\"!looked\" class=\"loading\">\r\n                <p>Loading..</p>\r\n            </div>\r\n        </transition>\r\n        <div v-if=\"communityProfile\">\r\n            <div class=\"commBanner\" v-if=\"communityProfile\">\r\n                <h1 align=\"center\"><span>{{communityProfile.name}}</span></h1>\r\n            </div>\r\n\r\n            <div class=\"navInterests\" v-if=\"communityProfile\">\r\n                    <el-menu class=\"el-menu\"\r\n                 mode=\"horizontal\"\r\n                 background-color=\"#5A61A6\"\r\n                 text-color=\"#fff\"\r\n                 active-text-color=\"#ffd04b\"\r\n                 @select=\"handleSelect\">\r\n            <el-menu-item index=\"#home\" style=\" color: #FFFFFF\"  ><i class=\"el-icon-s-home\"  style=\"color: #FFFFFF\"></i>Home</el-menu-item>\r\n            <el-menu-item index=\"#resources\" style=\" color: #FFFFFF\"  ><i class=\"el-icon-present\"  style=\"color: #FFFFFF\"></i>Resources</el-menu-item>\r\n            <el-menu-item index=\"#about\" style=\" color: #FFFFFF\"  ><i class=\"el-icon-notebook-2\"  style=\"color: #FFFFFF\"></i>About</el-menu-item>\r\n            <el-menu-item index=\"#admin\" style=\" color: #FFFFFF\" v-if=\"admin\" ><i class=\"el-icon-s-custom\"  style=\"color: #FFFFFF\"></i>Admin</el-menu-item>\r\n            <el-menu-item index=\"#subscribe\" style=\" color: #FFFFFF;\" v-if=\"userProfile.name !== undefined && !subscribed\"><i class=\"el-icon-message-solid\"  style=\"color: #FFFFFF\"></i>Subscribe</el-menu-item>\r\n            <el-menu-item index=\"#unsubscribe\" style=\" color: #FFFFFF\" v-if=\"userProfile.name !== undefined && subscribed\"><i class=\"el-icon-close-notification\"  style=\"color: #FFFFFF\"></i>Unsubscribe</el-menu-item>\r\n        </el-menu>\r\n            </div>\r\n            <div v-if=\"home\">\r\n            <div class=\"resourceCategories\" v-if=\"communityProfile\">\r\n                <div class=\"popCategories\">\r\n                    <h1>Popular Resource Categories</h1>\r\n                </div>\r\n                <vueper-slides\r\n                        class=\"no-shadow\"\r\n                        :visible-slides=\"3\"\r\n                        slide-multiple\r\n                        :gap=\"3\"\r\n                        :arrows=\"false\"\r\n                        :slide-ratio=\"1 / 8\"\r\n                        :dragging-distance=\"200\"\r\n                        :breakpoints=\"{ 1200: { slideRatio: 1 / 5 },800: { visibleSlides: 2, slideMultiple: 2, slideRatio:1/3 }, 600: { visibleSlides: 1, slideMultiple: 2, slideRatio:1/2 } }\">\r\n                    <vueper-slide v-for=\"(slide, i) in slides\"\r\n                                  :key=\"i\"\r\n                                  :title=\"slide.title\"\r\n                                  :content=\"slide.content\"\r\n                                  :style=\"'background-color: ' + ['#C3C7E7', '#C3C7E7'][i % 2]\" />\r\n                </vueper-slides>\r\n\r\n                <div class=\"recCategories\">\r\n                    <h1>Recommended Resource Categories</h1>\r\n                </div>\r\n                <vueper-slides\r\n                        class=\"no-shadow\"\r\n                        :visible-slides=\"3\"\r\n                        slide-multiple\r\n                        :arrows=\"false\"\r\n                        :gap=\"3\"\r\n                        :slide-ratio=\"1 / 8\"\r\n                        :dragging-distance=\"200\"\r\n                        :breakpoints=\"{ 1200: { slideRatio: 1 / 5 },800: { visibleSlides: 2, slideMultiple: 2, slideRatio:1/3 }, 600: { visibleSlides: 1, slideMultiple: 2, slideRatio:1/2 } }\">\r\n                    <vueper-slide v-for=\"(slide, i) in slides_recc\"\r\n                                  :key=\"i\"\r\n                                  :title=\"slide.title\"\r\n                                  :content=\"slide.content\"\r\n                                  :style=\"'background-color: ' + ['#C3C7E7', '#C3C7E7'][i % 2]\" />\r\n                </vueper-slides>\r\n            </div>\r\n            </div>\r\n\r\n            <div v-if=\"resources\" class=\"resources\">\r\n                <div class=\"resourceCategories\" v-if=\"communityProfile\">\r\n                    <div class=\"filterRecources\">\r\n                        <select style=\"float: right; margin-right: 7%;\">\r\n                            <option value=\"\" disabled selected hidden>Sort by...</option>\r\n                            <option v-for=\"interest in sortby\">{{interest}}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"popCategories\">\r\n                        <h1>Resources</h1>\r\n                    </div>\r\n\r\n                    <el-button @click=\"clearFilter\">Reset All Filters</el-button>\r\n                    <el-table\r\n                        ref=\"filterTable\"\r\n                        :data=\"tableData\"\r\n                        style=\"width: 85%\">\r\n                        <el-table-column\r\n                            width=90>\r\n                            <template slot-scope=\"scope\">\r\n                                <el-button class=\"viewButton\"\r\n                                           size=\"mini\"\r\n                                           @click=\"viewCommunity(scope.$index, scope.row)\"\r\n                                           round>\r\n                                    View\r\n                                </el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"date\"\r\n                            label=\"Date\"\r\n                            sortable\r\n                            width=\"180\"\r\n                            column-key=\"date\"\r\n                            :filter-method=\"filterHandler\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"userName\"\r\n                            label=\"Username\"\r\n                            width=\"180\"\r\n                            sortable>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"title\"\r\n                            label=\"Title\"\r\n                            sortable>\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"upvotes\"\r\n                            label=\"Upvotes\"\r\n                            sortable>\r\n                            \r\n                        </el-table-column>\r\n                        <el-table-column\r\n                            prop=\"tag\"\r\n                            label=\"Tag\"\r\n                            width=\"112\"\r\n                            :filters=\"[\r\n                                { text: 'Food', value: 'Food' }, \r\n                                { text: 'Education', value: 'Education' },\r\n                                { text: 'Documentation', value: 'Documentation' }, \r\n                                { text: 'Healthcare', value: 'Healthcare' }\r\n                            ]\"\r\n                            :filter-method=\"filterTag\"\r\n                            filter-placement=\"bottom-end\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-tag\r\n                                :type=\"scope.row.tag === 'Home' ? 'primary' : 'success'\"\r\n                                disable-transitions>{{scope.row.tag}}</el-tag>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n\r\n\r\n\r\n\r\n\r\n                    \r\n                    <!-- <el-card v-for=\"card in cards\" class=\"box-card\">\r\n                        <div class=\"headerContainer\">\r\n                           <ul>\r\n                               <li><i class=\"el-icon-user-solid\"  style=\"color: gray\"></i></li>     \r\n                                <li>\r\n                                    <div class=\"userInfo\">\r\n                                        <div class=\"postInfo\">\r\n                                            <p>{{card.user}}</p>\r\n                                            <p><i>{{card.date}}</i></p>\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                                <li>\r\n                                    <div class=\"title\"><h2>{{card.title}}</h2></div>\r\n                                </li>\r\n                               <!-- <li>\r\n                                   <div class=\"votes\">{{card.votes}}</div>\r\n                               </li> -->\r\n                            <!-- </ul>\r\n                        </div>\r\n\r\n                        <div class=\"text item\">\r\n                            {{card.description}}\r\n                            <br><br><button v-on:click=\"postInfo=true\" class=\"button\" style=\"float: right; margin-bottom: 20px\">View</button>\r\n                        </div>\r\n                    </el-card> --> -->\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <div v-if=\"about\">\r\n                <div class=\"communityGuidelines\" v-if=\"communityProfile\">\r\n                    <div class=\"description\" v-if=\"communityProfile\">\r\n                        <h1>Description</h1>\r\n                        <p><span>{{ communityProfile.description }}</span></p>\r\n                    </div>\r\n                    <div class=\"commDetails\" v-if=\"communityProfile\">\r\n                        <div class=\"rules\">\r\n                            <h3>Community Rules</h3>\r\n                            <p><span>{{ communityProfile.rules }}</span></p>\r\n                        </div>\r\n                        <div class=\"activity\" v-if=\"communityProfile\">\r\n                            <h3>Community Activity</h3>\r\n                            <p>[number] new posts today</p>\r\n                            <p>[number] members</p>\r\n                            <p><i>Created [number] years ago</i></p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div v-if=\"adminSelect\">\r\n                <div>\r\n                    <section>\r\n                        <div class=\"col1\">\r\n                            <div class=\"profile\">\r\n                               <!-- <img height=\"150px\" width=\"150px\" src=\"../assets/user_icon.png\"/> -->\r\n                                <h5 style=\"float: right; margin-top: 20px;\">{{ communityProfile.name }}</h5>\r\n                                <form @submit.prevent>\r\n                                    <p style=\" margin-top: 20px;\">\r\n                                        Name:<input v-model.trim=\"name\" type=\"text\" :placeholder=\"communityProfile.name\" id=\"name\" />\r\n                                    </p>\r\n                                    <p>\r\n                                        Description:<el-input\r\n                                            type=\"textarea\"\r\n                                            :placeholder=\"communityProfile.description\"\r\n                                            v-model=\"description\"\r\n                                            maxlength=\"500\"\r\n                                            show-word-limit\r\n                                    >\r\n                                    </el-input>\r\n                                    </p>\r\n                                    <p>\r\n                                        Rules:<el-input\r\n                                            type=\"textarea\"\r\n                                            :placeholder=\"communityProfile.rules\"\r\n                                            v-model=\"rules\"\r\n                                            maxlength=\"500\"\r\n                                            show-word-limit\r\n                                    >\r\n                                    </el-input>\r\n                                    </p>\r\n                                    <p>\r\n                                        Owner:<input v-model.trim=\"newOwner\" type=\"text\" :placeholder=\"communityProfile.owner\" id=\"Owner\">\r\n                                    </p>\r\n                                    <p v-if=\"owner\">\r\n                                        Moderators: <vue-tags-input\r\n                                            v-model=\"moderator\"\r\n                                            :tags=\"moderators\"\r\n                                            :validation=\"validation\"\r\n                                            placeholder=\"Add moderators by emails\"\r\n                                            @tags-changed=\"newTags => moderators = newTags\"\r\n                                    />\r\n                                    </p>\r\n                                    <p>\r\n                                        City:<input v-model.trim=\"city\" type=\"text\" :placeholder=\"communityProfile.city\" id=\"city\">\r\n                                    </p>\r\n                                    <p>\r\n                                        State:<input v-model.trim=\"state\" type=\"text\" :placeholder=\"communityProfile.state\" id=\"state\">\r\n                                    </p>\r\n                                    <p>\r\n                                        Country:<input v-model.trim=\"country\" type=\"text\" :placeholder=\"communityProfile.country\" id=\"country\">\r\n                                    </p>\r\n                                    <button @click=\"errorCheck\" class=\"button\">Update Community Profile</button>\r\n\r\n                                    <el-alert\r\n                                            title=\"Your changes has been saved.\"\r\n                                            type=\"success\"\r\n                                            v-if=\"showSuccess\">\r\n                                    </el-alert>\r\n                                </form>\r\n                                <transition name=\"fade\">\r\n                                    <div v-if=\"errorMsg !== ''\" class=\"error-msg\">\r\n                                        <p>{{ errorMsg }}</p>\r\n                                    </div>\r\n                                </transition>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col2\">\r\n                            <div class=\"user-form\">\r\n                                <h5 style=\" margin-bottom: 20px;\">Community Interests</h5>\r\n\r\n                                                        <ListInterests v-bind:interests=\"communityProfile.interests\"\r\n                                                                       @remove-interest=\"removeInterest\" v-if=\"currentInterestLen\"\r\n                                                        />\r\n                                                        <p class=\"emptylist\" v-else>How lonely... try adding an interest.</p>\r\n                                                        <AddInterest @add-interest=\"addInterest\"/>\r\n                                <el-alert\r\n                                        title=\"Your changes has been saved.\"\r\n                                        type=\"success\"\r\n                                        v-if=\"showSuccessInt\">\r\n                                </el-alert>\r\n\r\n                            </div>\r\n<!--                            <div class=\"user-form\">-->\r\n<!--                                <h5 style=\" margin-bottom: 20px;\">Resources in your community.</h5>-->\r\n\r\n<!--                                                        <ListCommunities v-bind:communities=\"communities\"-->\r\n<!--                                                                         @remove-community=\"removeCommunity\" v-if=\"communities.length\"-->\r\n<!--                                                        />-->\r\n<!--                                                        <p class=\"emptylist\" v-else>How lonely... try looking for a community.</p>-->\r\n<!--                                                        <AddCommunity @add-community=\"addCommunity\"/>-->\r\n<!--                            </div>-->\r\n                        </div>\r\n                </section>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n        <div class=\"commBanner\" v-if=\"!communityProfile && looked\">\r\n            <h1 align=\"center\">Community Not Found</h1>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import { mapState } from 'vuex'\r\n    import moment from 'moment'\r\n    import { VueperSlides, VueperSlide } from 'vueperslides'\r\n    import 'vueperslides/dist/vueperslides.css'\r\n    const fb = require('../firebaseConfig.js');\r\n    import VueTagsInput from '@johmun/vue-tags-input';\r\n    import ListInterests from \"@/components/ListInterests\"\r\n    import ListCommunities from \"@/components/ListCommunities\";\r\n    import AddInterest from \"@/components/AddInterest\"\r\n    import AddCommunity from \"@/components/AddCommunity\";\r\nexport default {\r\n    beforeCreate() {\r\n        this.looked = false;\r\n        this.$store.commit('setCommunityProfile', false);\r\n        this.$store.commit('setCurrentCommunity', this.$route.params.id);\r\n        this.$store.dispatch('fetchCommunityProfile');\r\n\r\n    },\r\n    beforeUpdate() {\r\n        this.looked = true;\r\n        // if logged in, find if the user is a owner and or moderator\r\n        if(this.userProfile.name !== undefined){\r\n            if(this.communityProfile.owner === this.userProfile.email){\r\n                this.owner = true;\r\n            }\r\n            if(this.communityProfile.moderators.indexOf(this.userProfile.email) !== -1){\r\n                this.admin = true;\r\n            }\r\n            this.userProfile.communities.map((com)=>{\r\n                if (com.title !== undefined){\r\n                    if(com.title === this.communityProfile.link){\r\n                        this.subscribed = true;\r\n                    }\r\n                }\r\n            });\r\n            if(!this.loadedMod){\r\n                this.moderators = this.communityProfile.moderators.map((mod)=> {\r\n                    return {text: mod}\r\n                });\r\n                this.loadedMod = true;\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState(['communityProfile', 'userProfile']),\r\n        currentInterestLen(state) {\r\n            // return state.userProfile.interests.length;\r\n            return 4;\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n            post: {\r\n                    content: ''\r\n                },\r\n\r\n                slides: [\r\n                {\r\n                  id: 'slide-0',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Food Assistance</b>',\r\n                  content: 'This is the Food Assistance intererst.'+\r\n                   '<br><br><button @click=\"foodAssistance_card\"  class=\"button\">View</button>'\r\n                },\r\n                {\r\n                  id: 'slide-1',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Health Care</b>',\r\n                  content: 'This is the Healthcare interest.'+\r\n                   '<br><br><button @click=\"healthcare_card\"  class=\"button\">View</button>'\r\n                },\r\n                {\r\n                  id: 'slide-2',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Education</b>',\r\n                  content: 'This is the Education Interest.'+\r\n                   '<br><br><button @click=\"education_card\"  class=\"button\">View</button>'\r\n                },\r\n                 {\r\n                  id: 'slide-3',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Legal Assistance</b>',\r\n                  content: 'This is the Legal Assistance.'+\r\n                   '<br><br><button @click=\"legalAssistance_card\"  class=\"button\">View</button>'\r\n                }\r\n              ],\r\n            slides_recc: [\r\n                {\r\n                  id: 'slide-0',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 1</b>',\r\n                  content: 'This is a description'+\r\n                   '<br><br><button @click=\"recc1_card\"  class=\"button\">View</button>'\r\n\r\n                },\r\n                {\r\n                  id: 'slide-1',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 2</b>',\r\n                  content: 'This is a description'+\r\n                   '<br><br><button @click=\"recc2_card\"  class=\"button\">View</button>'\r\n                },\r\n                {\r\n                  id: 'slide-2',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 3</b>',\r\n                  content: 'This is a description'+\r\n                   '<br><br><button @click=\"recc3_card\"  class=\"button\">View</button>'\r\n                },\r\n                 {\r\n                  id: 'slide-3',\r\n                  title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 4</b>',\r\n                  content: 'This is a description'+\r\n                   '<br><br><button @click=\"recc4_card\"  class=\"button\">View</button>'\r\n                }\r\n            ],\r\n            tableData: [{\r\n                userName: 'user1999',\r\n                date: '2016-05-03',\r\n                title: 'Food Bank in West Seattle',\r\n                upvotes: 45,\r\n                tag: 'Food'\r\n            }, \r\n                {\r\n                userName: 'loctruong12',\r\n                date: '2016-05-06',\r\n                title: 'Master list of links for immigrant documentation',\r\n                upvotes: 15,\r\n                tag: 'Documentation'\r\n            }, \r\n            {\r\n                userName: 'felixTran44',\r\n                date: '2016-09-03',\r\n                title: 'Looking for scholarships? Go to Cappex.com',\r\n                upvotes: 88,\r\n                tag: 'Education'\r\n            }, \r\n            {\r\n                userName: 'kidabrea48',\r\n                date: '2019-12-04',\r\n                title: 'FYI: This drug store is doing a 15% off deal on all items right now!',\r\n                upvotes: 99,\r\n                tag: 'Healthcare'\r\n            },\r\n            {\r\n                userName: 'esperia97',\r\n                date: '2017-05-21',\r\n                title: 'This clinic downtown offers free STD testing!',\r\n                upvotes: 69,\r\n                tag: 'Healthcare'\r\n            }\r\n            ],\r\n            subscribed: false,\r\n            loadedMod: false,\r\n            newOwner: '',\r\n            looked: false,\r\n            home: true,\r\n            resources: false,\r\n            postInfo: false,\r\n            about: false,\r\n            admin: false,\r\n            adminSelect: false,\r\n            owner: false,\r\n            properName: /^[a-zA-Z]+(([\\',. -][a-zA-Z ])?[a-zA-Z]*)*$/,\r\n            name: '',\r\n            title: '',\r\n            city: '',\r\n            state: '',\r\n            country: '',\r\n            rules: '',\r\n            description: '',\r\n            errorMsg: '',\r\n            moderator: '',\r\n            moderators: [],\r\n            showSuccess: false,\r\n            showSuccessInt: false,\r\n            interests: [\r\n            ],\r\n            communities: [\r\n            ],\r\n            validation: [{\r\n                classes: 'valid-email',\r\n                rule: /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/,\r\n                disableAdd: true,\r\n            }],\r\n            userInfo: \"User 12345\",\r\n            postDate: \"April 20, 2018\",\r\n            postTitle: \"Food Drive at Westfield Food Bank\",\r\n            postDesc: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\",\r\n            postVotes: 68,\r\n            sortby: [\"Food\", \"Education\", \"Documentation\",\"Healthcare\"],\r\n            cards: [{title: \"Food Drive at Westfield Food Bank\",\r\n            description: \"stuff\", votes: 68, date: \"April 20, 2018\", user: \"User 12345\"},{title: \"Food Drive at Westfield Food Bank\",\r\n            description: \"stuff\", votes: 68, date: \"April 20, 2018\", user: \"User 6789\"}]\r\n\r\n        }\r\n    },\r\n    methods: {\r\n            handleSelect(key, keyPath) {\r\n                // console.log(key, keyPath);\r\n                if(key === '#home'){\r\n                    this.home = true;\r\n                    this.resources = false;\r\n                    this.about = false;\r\n                    this.adminSelect = false;\r\n                    this.postInfo = false;\r\n                }\r\n                else if(key === '#resources') {\r\n                    this.home = false;\r\n                    this.resources = true;\r\n                    this.about = false;\r\n                    this.adminSelect = false;\r\n                    this.postInfo = false;\r\n                    if(key === '#postInfo') {\r\n                        this.resources = false;\r\n                        this.postInfo = true;\r\n                    }\r\n                }\r\n                else if(key === '#about') {\r\n                    this.home = false;\r\n                    this.resources = false;\r\n                    this.about = true;\r\n                    this.adminSelect = false;\r\n                    this.postInfo = false;\r\n                } else if(key === '#admin'){\r\n                    this.home = false;\r\n                    this.resources = false;\r\n                    this.about = false;\r\n                    this.adminSelect = true;\r\n                    this.postInfo = false;\r\n                } else if(key === '#subscribe'){\r\n                    this.subscribed = true;\r\n                    this.subscribe()\r\n                } else if(key === '#unsubscribe'){\r\n                    this.subscribed = false;\r\n                    this.unsubscribe();\r\n                }\r\n            },\r\n\r\n\r\n            resetDateFilter() {\r\n                this.$refs.filterTable.clearFilter('date');\r\n            },\r\n            clearFilter() {\r\n                this.$refs.filterTable.clearFilter();\r\n            },\r\n            formatter(row, column) {\r\n                return row.address;\r\n            },\r\n            filterTag(value, row) {\r\n                return row.tag === value;\r\n            },\r\n            filterHandler(value, row, column) {\r\n                const property = column['property'];\r\n                return row[property] === value;\r\n            },\r\n\r\n\r\n\r\n\r\n\r\n           \r\n         errorCheck(){\r\n            let error = false;\r\n            let foundOwner = false;\r\n            this.moderators.map((mod) => {\r\n                if(mod.text === this.communityProfile.owner){\r\n                    foundOwner = true;\r\n                }\r\n            });\r\n            if(!foundOwner){\r\n                error = true;\r\n                this.errorMsg = \"Can not remove owner from admin.\"\r\n            } else if(this.interests.length > 30){\r\n                error = true;\r\n                this.errorMsg = \"We currently only allow a community to have up to 30 interests.\"\r\n            } else if(!this.properName.test(this.name) && this.name !== ''){\r\n                error = true;\r\n                this.errorMsg = \"Invalid naming format. Alpha characters and space only.\"\r\n            } else if(this.moderators.length !== this.communityProfile.moderators.length) {\r\n                this.$confirm('You are about to update moderators as an owner. Continue?', 'Warning', {\r\n                    confirmButtonText: 'OK',\r\n                    cancelButtonText: 'Cancel',\r\n                    type: 'warning'\r\n                }).then(async () => {\r\n                    const stat = await this.updateCommunityProfile();\r\n                }).catch(() => {\r\n                    error = true;\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: 'Moderators update canceled'\r\n                    });\r\n                })\r\n            } else {\r\n                this.updateCommunityProfile();\r\n            }\r\n        },\r\n        async updateCommunityProfile() {\r\n            this.errorMsg = \"\";\r\n            // check if all emails are actually valid\r\n            this.looked = false;\r\n            const userRef = fb.usersCollection;\r\n            let valid = true;\r\n            const finalMods = [];\r\n            await Promise.all(this.moderators.map(async (mod) => {\r\n                finalMods.push(mod.text);\r\n                const query  = await userRef.where(\"email\", \"==\", mod.text);\r\n                const querySnapshot = await query.get();\r\n                if(querySnapshot.size === 0){\r\n                    valid = false;\r\n                    this.looked = true;\r\n                    this.errorMsg = `Cannot find user associated with ${mod.text}.`\r\n                }\r\n            }));\r\n            if(valid){\r\n                await this.$store.dispatch('updateCommunityProfile', {\r\n                    name: this.name !== '' ? this.name : this.communityProfile.name,\r\n                    rules: this.rules !== '' ? this.rules: this.communityProfile.rules,\r\n                    description: this.description !== '' ? this.description: this.communityProfile.description,\r\n                    city: this.city !== '' ? this.city: this.communityProfile.city,\r\n                    state: this.state !== '' ? this.state: this.communityProfile.state,\r\n                    country: this.country !== '' ? this.country: this.communityProfile.country,\r\n                    interests: this.communityProfile.interests,\r\n                    link: this.communityProfile.link,\r\n                    createdOn: this.communityProfile.createdOn,\r\n                    moderators: finalMods,\r\n                    subscribers: this.communityProfile.subscribers,\r\n                    owner: this.communityProfile.owner,\r\n                });\r\n                this.name = '';\r\n                this.title = '';\r\n                this.city = '';\r\n                this.state = '';\r\n                this.showSuccess = true;\r\n                setTimeout(() => { this.showSuccess = false }, 2000)\r\n            }\r\n            return valid;\r\n        },\r\n        removeInterest(id) {\r\n            this.communityProfile.interests = this.communityProfile.interests.filter(t=> t.id !== id);\r\n            this.updateCommunityInterestFirebase();\r\n        },\r\n        addInterest(interest) {\r\n            this.communityProfile.interests.push(interest);\r\n            this.updateCommunityInterestFirebase();\r\n        },\r\n        removeCommunity(id) {\r\n            this.communities = this.communities.filter(t=> t.id !== id)\r\n        },\r\n        addCommunity(community) {\r\n            this.communities.push(community)\r\n        },\r\n        updateCommunityInterestFirebase() {\r\n            const updatedInterest = [];\r\n            let counter = 0;\r\n            this.communityProfile.interests.map((interest) => {\r\n                updatedInterest.push({id:counter, title: interest.title, completed: false});\r\n                counter += 1;\r\n            });\r\n            this.$store.dispatch('updateCommunityProfile', {\r\n                name: this.communityProfile.name,\r\n                rules: this.communityProfile.rules,\r\n                description: this.communityProfile.description,\r\n                city:  this.communityProfile.city,\r\n                state: this.communityProfile.state,\r\n                country: this.communityProfile.country,\r\n                interests: updatedInterest,\r\n                createdOn: this.communityProfile.createdOn,\r\n                subscribers: this.communityProfile.subscribers,\r\n                link: this.communityProfile.link,\r\n                moderators: this.communityProfile.moderators,\r\n                owner: this.communityProfile.owner,\r\n            });\r\n            this.showSuccessInt = true;\r\n\r\n            setTimeout(() => { this.showSuccessInt = false }, 2000)\r\n        },\r\n        subscribe(){\r\n            this.userProfile.communities.push({id:0, title: this.communityProfile.link, completed: false});\r\n            this.updateUserSubscription();\r\n        },\r\n        unsubscribe(){\r\n            this.userProfile.communities = this.userProfile.communities.filter(t=> t.title !== this.communityProfile.link);\r\n            this.updateUserSubscription();\r\n        }\r\n        ,\r\n        updateUserSubscription() {\r\n            const updatedCommunities = [];\r\n            let counter = 0;\r\n            this.userProfile.communities.map((community) => {\r\n                updatedCommunities.push({id:counter, title: community.title, completed: false});\r\n                counter += 1;\r\n            });\r\n            this.$store.dispatch('updateProfile', {\r\n                name: this.userProfile.name,\r\n                title: this.userProfile.title,\r\n                city:  this.userProfile.city,\r\n                state: this.userProfile.state,\r\n                country: this.userProfile.country,\r\n                interests: this.userProfile.interests,\r\n                communities: updatedCommunities,\r\n            });\r\n        }\r\n        },\r\n    components: {\r\n        VueperSlides,\r\n        VueperSlide,\r\n        ListInterests,\r\n        AddInterest,\r\n        AddCommunity,\r\n        ListCommunities,\r\n        VueTagsInput}\r\n\r\n}\r\n</script>\r\n"]}]}