{"remainingRequest":"C:\\Users\\kidab\\csci\\homing-haven\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\kidab\\csci\\homing-haven\\src\\components\\Resource.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\kidab\\csci\\homing-haven\\src\\components\\Resource.vue","mtime":1584076586938},{"path":"C:\\Users\\kidab\\csci\\homing-haven\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\kidab\\csci\\homing-haven\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCmltcG9ydCB7IFZ1ZXBlclNsaWRlcywgVnVlcGVyU2xpZGUgfSBmcm9tICd2dWVwZXJzbGlkZXMnCmltcG9ydCAndnVlcGVyc2xpZGVzL2Rpc3QvdnVlcGVyc2xpZGVzLmNzcycKY29uc3QgZmIgPSByZXF1aXJlKCcuLi9maXJlYmFzZUNvbmZpZy5qcycpOwppbXBvcnQgVnVlVGFnc0lucHV0IGZyb20gJ0Bqb2htdW4vdnVlLXRhZ3MtaW5wdXQnOwppbXBvcnQgTGlzdEludGVyZXN0cyBmcm9tICJAL2NvbXBvbmVudHMvTGlzdEludGVyZXN0cyIKaW1wb3J0IExpc3RDb21tdW5pdGllcyBmcm9tICJAL2NvbXBvbmVudHMvTGlzdENvbW11bml0aWVzIjsKaW1wb3J0IEFkZEludGVyZXN0IGZyb20gIkAvY29tcG9uZW50cy9BZGRJbnRlcmVzdCIKaW1wb3J0IEFkZENvbW11bml0eSBmcm9tICJAL2NvbXBvbmVudHMvQWRkQ29tbXVuaXR5IjsKZXhwb3J0IGRlZmF1bHQgewogICAgYmVmb3JlQ3JlYXRlKCkgewogICAgICAgIHRoaXMubG9va2VkID0gZmFsc2U7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRSZXNvdXJjZVByb2ZpbGUnLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDdXJyZW50UmVzb3VyY2UnLCB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdmZXRjaFJlc291cmNlUHJvZmlsZScpOwoKICAgIH0sCiAgICBiZWZvcmVVcGRhdGUoKSB7CiAgICAgICAgdGhpcy5sb29rZWQgPSB0cnVlOwogICAgICAgIC8vIGlmIGxvZ2dlZCBpbiwgZmluZCBpZiB0aGUgdXNlciBpcyBhIG93bmVyIGFuZCBvciBtb2RlcmF0b3IKICAgICAgICBpZih0aGlzLnVzZXJQcm9maWxlLm5hbWUgIT09IHVuZGVmaW5lZCl7CiAgICAgICAgICAgIGlmKHRoaXMucmVzb3VyY2VQcm9maWxlLm93bmVyID09PSB0aGlzLnVzZXJQcm9maWxlLmVtYWlsKXsKICAgICAgICAgICAgICAgIHRoaXMub3duZXIgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHRoaXMucmVzb3VyY2VQcm9maWxlLm1vZGVyYXRvcnMuaW5kZXhPZih0aGlzLnVzZXJQcm9maWxlLmVtYWlsKSAhPT0gLTEpewogICAgICAgICAgICAgICAgdGhpcy5hZG1pbiA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZS5jb21tdW5pdGllcy5tYXAoKGNvbSk9PnsKICAgICAgICAgICAgICAgIGlmIChjb20udGl0bGUgIT09IHVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgICAgaWYoY29tLnRpdGxlID09PSB0aGlzLnJlc291cmNlUHJvZmlsZS5saW5rKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZighdGhpcy5sb2FkZWRNb2QpewogICAgICAgICAgICAgICAgdGhpcy5tb2RlcmF0b3JzID0gdGhpcy5yZXNvdXJjZVByb2ZpbGUubW9kZXJhdG9ycy5tYXAoKG1vZCk9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt0ZXh0OiBtb2R9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkTW9kID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcFN0YXRlKFsncmVzb3VyY2VQcm9maWxlJywgJ3VzZXJQcm9maWxlJywgJ2N1cnJlbnRVc2VyJywgJ3Bvc3RzJywgJ2hpZGRlblBvc3RzJ10pLAogICAgICAgIGN1cnJlbnRJbnRlcmVzdExlbihzdGF0ZSkgewogICAgICAgICAgICAvLyByZXR1cm4gc3RhdGUudXNlclByb2ZpbGUuaW50ZXJlc3RzLmxlbmd0aDsKICAgICAgICAgICAgcmV0dXJuIDQ7CiAgICAgICAgfQogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHBvc3Q6IHsKICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbW1lbnQ6IHsKICAgICAgICAgICAgICAgIHBvc3RJZDogJycsCiAgICAgICAgICAgICAgICB1c2VySWQ6ICcnLAogICAgICAgICAgICAgICAgY29udGVudDogJycsCiAgICAgICAgICAgICAgICBwb3N0Q29tbWVudHM6IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvd0NvbW1lbnRNb2RhbDogZmFsc2UsCiAgICAgICAgICAgIHNob3dQb3N0TW9kYWw6IGZhbHNlLAogICAgICAgICAgICBmdWxsUG9zdDoge30sCiAgICAgICAgICAgIHBvc3RDb21tZW50czogW10sCiAgICAgICAgICAgIHNsaWRlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAnc2xpZGUtMCcsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8YiBzdHlsZT0iZm9udC1zaXplOiAxLjNlbTtjb2xvcjogIj5Gb29kIEFzc2lzdGFuY2U8L2I+JywKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnVGhpcyBpcyB0aGUgRm9vZCBBc3Npc3RhbmNlIGludGVyZXJzdC4nKwogICAgICAgICAgICAgICAgICAgICAgICAnPGJyPjxicj48YnV0dG9uIEBjbGljaz0iZm9vZEFzc2lzdGFuY2VfY2FyZCIgIGNsYXNzPSJidXR0b24iPlZpZXc8L2J1dHRvbj4nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAnc2xpZGUtMScsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8YiBzdHlsZT0iZm9udC1zaXplOiAxLjNlbTtjb2xvcjogIj5IZWFsdGggQ2FyZTwvYj4nLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIHRoZSBIZWFsdGhjYXJlIGludGVyZXN0LicrCiAgICAgICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJoZWFsdGhjYXJlX2NhcmQiICBjbGFzcz0iYnV0dG9uIj5WaWV3PC9idXR0b24+JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZDogJ3NsaWRlLTInLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPGIgc3R5bGU9ImZvbnQtc2l6ZTogMS4zZW07Y29sb3I6ICI+RWR1Y2F0aW9uPC9iPicsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1RoaXMgaXMgdGhlIEVkdWNhdGlvbiBJbnRlcmVzdC4nKwogICAgICAgICAgICAgICAgICAgICAgICAnPGJyPjxicj48YnV0dG9uIEBjbGljaz0iZWR1Y2F0aW9uX2NhcmQiICBjbGFzcz0iYnV0dG9uIj5WaWV3PC9idXR0b24+JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZDogJ3NsaWRlLTMnLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPGIgc3R5bGU9ImZvbnQtc2l6ZTogMS4zZW07Y29sb3I6ICI+TGVnYWwgQXNzaXN0YW5jZTwvYj4nLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIHRoZSBMZWdhbCBBc3Npc3RhbmNlLicrCiAgICAgICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJsZWdhbEFzc2lzdGFuY2VfY2FyZCIgIGNsYXNzPSJidXR0b24iPlZpZXc8L2J1dHRvbj4nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIHNsaWRlc19yZWNjOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWQ6ICdzbGlkZS0wJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJzxiIHN0eWxlPSJmb250LXNpemU6IDEuM2VtO2NvbG9yOiAiPlJlY29tbWVuZGVkIENhdGVnb3J5IDE8L2I+JywKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnVGhpcyBpcyBhIGRlc2NyaXB0aW9uJysKICAgICAgICAgICAgICAgICAgICAgICAgJzxicj48YnI+PGJ1dHRvbiBAY2xpY2s9InJlY2MxX2NhcmQiICBjbGFzcz0iYnV0dG9uIj5WaWV3PC9idXR0b24+JwoKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWQ6ICdzbGlkZS0xJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJzxiIHN0eWxlPSJmb250LXNpemU6IDEuM2VtO2NvbG9yOiAiPlJlY29tbWVuZGVkIENhdGVnb3J5IDI8L2I+JywKICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnVGhpcyBpcyBhIGRlc2NyaXB0aW9uJysKICAgICAgICAgICAgICAgICAgICAgICAgJzxicj48YnI+PGJ1dHRvbiBAY2xpY2s9InJlY2MyX2NhcmQiICBjbGFzcz0iYnV0dG9uIj5WaWV3PC9idXR0b24+JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZDogJ3NsaWRlLTInLAogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnPGIgc3R5bGU9ImZvbnQtc2l6ZTogMS4zZW07Y29sb3I6ICI+UmVjb21tZW5kZWQgQ2F0ZWdvcnkgMzwvYj4nLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgZGVzY3JpcHRpb24nKwogICAgICAgICAgICAgICAgICAgICAgICAnPGJyPjxicj48YnV0dG9uIEBjbGljaz0icmVjYzNfY2FyZCIgIGNsYXNzPSJidXR0b24iPlZpZXc8L2J1dHRvbj4nCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAnc2xpZGUtMycsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICc8YiBzdHlsZT0iZm9udC1zaXplOiAxLjNlbTtjb2xvcjogIj5SZWNvbW1lbmRlZCBDYXRlZ29yeSA0PC9iPicsCiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJ1RoaXMgaXMgYSBkZXNjcmlwdGlvbicrCiAgICAgICAgICAgICAgICAgICAgICAgICc8YnI+PGJyPjxidXR0b24gQGNsaWNrPSJyZWNjNF9jYXJkIiAgY2xhc3M9ImJ1dHRvbiI+VmlldzwvYnV0dG9uPicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgc3Vic2NyaWJlZDogZmFsc2UsCiAgICAgICAgICAgIGxvYWRlZE1vZDogZmFsc2UsCiAgICAgICAgICAgIG5ld093bmVyOiAnJywKICAgICAgICAgICAgbG9va2VkOiBmYWxzZSwKICAgICAgICAgICAgaG9tZTogdHJ1ZSwKICAgICAgICAgICAgcmVzb3VyY2VzOiBmYWxzZSwKICAgICAgICAgICAgcG9zdEluZm86IGZhbHNlLAogICAgICAgICAgICBhYm91dDogZmFsc2UsCiAgICAgICAgICAgIGFkbWluOiBmYWxzZSwKICAgICAgICAgICAgYWRtaW5TZWxlY3Q6IGZhbHNlLAogICAgICAgICAgICBvd25lcjogZmFsc2UsCiAgICAgICAgICAgIHByb3Blck5hbWU6IC9eW2EtekEtWl0rKChbXCcsLiAtXVthLXpBLVogXSk/W2EtekEtWl0qKSokLywKICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgY2l0eTogJycsCiAgICAgICAgICAgIHN0YXRlOiAnJywKICAgICAgICAgICAgY291bnRyeTogJycsCiAgICAgICAgICAgIHJ1bGVzOiAnJywKICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgICAgICBlcnJvck1zZzogJycsCiAgICAgICAgICAgIG1vZGVyYXRvcjogJycsCiAgICAgICAgICAgIG1vZGVyYXRvcnM6IFtdLAogICAgICAgICAgICBzaG93U3VjY2VzczogZmFsc2UsCiAgICAgICAgICAgIHNob3dTdWNjZXNzSW50OiBmYWxzZSwKICAgICAgICAgICAgaW50ZXJlc3RzOiBbCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNvbW11bml0aWVzOiBbCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIHZhbGlkYXRpb246IFt7CiAgICAgICAgICAgICAgICBjbGFzc2VzOiAndmFsaWQtZW1haWwnLAogICAgICAgICAgICAgICAgcnVsZTogL15cdysoW1wuLV0/XHcrKSpAXHcrKFtcLi1dP1x3KykqKFwuXHd7MiwzfSkrJC8sCiAgICAgICAgICAgICAgICBkaXNhYmxlQWRkOiB0cnVlLAogICAgICAgICAgICB9XSwKICAgICAgICAgICAgdXNlckluZm86ICJVc2VyIDEyMzQ1IiwKICAgICAgICAgICAgcG9zdERhdGU6ICJBcHJpbCAyMCwgMjAxOCIsCiAgICAgICAgICAgIHBvc3RUaXRsZTogIkZvb2QgRHJpdmUgYXQgV2VzdGZpZWxkIEZvb2QgQmFuayIsCiAgICAgICAgICAgIHBvc3REZXNjOiAiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCwgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuIFV0IGVuaW0gYWQgbWluaW0gdmVuaWFtLCBxdWlzIG5vc3RydWQgZXhlcmNpdGF0aW9uIHVsbGFtY28gbGFib3JpcyBuaXNpIHV0IGFsaXF1aXAgZXggZWEgY29tbW9kbyBjb25zZXF1YXQuIER1aXMgYXV0ZSBpcnVyZSBkb2xvciBpbiByZXByZWhlbmRlcml0IGluIHZvbHVwdGF0ZSB2ZWxpdCBlc3NlIGNpbGx1bSBkb2xvcmUgZXUgZnVnaWF0IG51bGxhIHBhcmlhdHVyLiIsCiAgICAgICAgICAgIHBvc3RWb3RlczogNjgsCiAgICAgICAgICAgIHNvcnRieTogWyJGb29kIiwgIkVkdWNhdGlvbiIsICJEb2N1bWVudGF0aW9uIiwiSGVhbHRoY2FyZSJdLAogICAgICAgICAgICBjYXJkczogW3t0aXRsZTogIkZvb2QgRHJpdmUgYXQgV2VzdGZpZWxkIEZvb2QgQmFuayIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogInN0dWZmIiwgdm90ZXM6IDY4LCBkYXRlOiAiQXByaWwgMjAsIDIwMTgiLCB1c2VyOiAiVXNlciAxMjM0NSJ9LHt0aXRsZTogIkZvb2QgRHJpdmUgYXQgV2VzdGZpZWxkIEZvb2QgQmFuayIsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogInN0dWZmIiwgdm90ZXM6IDY4LCBkYXRlOiAiQXByaWwgMjAsIDIwMTgiLCB1c2VyOiAiVXNlciA2Nzg5In1dCgogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgaGFuZGxlU2VsZWN0KGtleSwga2V5UGF0aCkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhrZXksIGtleVBhdGgpOwogICAgICAgICAgICBpZihrZXkgPT09ICcjaG9tZScpewogICAgICAgICAgICAgICAgdGhpcy5ob21lID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmFib3V0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmFkbWluU2VsZWN0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnBvc3RJbmZvID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gZWxzZSBpZigpIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIGVsc2UgaWYoa2V5ID09PSAnI3Jlc291cmNlcycpIHsKICAgICAgICAgICAgICAgIHRoaXMuaG9tZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5hYm91dCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5hZG1pblNlbGVjdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5wb3N0SW5mbyA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYoa2V5ID09PSAnI3Bvc3RJbmZvJykgewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0SW5mbyA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZihrZXkgPT09ICcjYWJvdXQnKSB7CiAgICAgICAgICAgICAgICB0aGlzLmhvbWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmFib3V0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuYWRtaW5TZWxlY3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMucG9zdEluZm8gPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIGlmKGtleSA9PT0gJyNhZG1pbicpewogICAgICAgICAgICAgICAgdGhpcy5ob21lID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnJlc291cmNlcyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5hYm91dCA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5hZG1pblNlbGVjdCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnBvc3RJbmZvID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSBpZihrZXkgPT09ICcjc3Vic2NyaWJlJyl7CiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmUoKQogICAgICAgICAgICB9IGVsc2UgaWYoa2V5ID09PSAnI3Vuc3Vic2NyaWJlJyl7CiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZXJyb3JDaGVjaygpewogICAgICAgICAgICBsZXQgZXJyb3IgPSBmYWxzZTsKICAgICAgICAgICAgbGV0IGZvdW5kT3duZXIgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5tb2RlcmF0b3JzLm1hcCgobW9kKSA9PiB7CiAgICAgICAgICAgICAgICBpZihtb2QudGV4dCA9PT0gdGhpcy5yZXNvdXJjZVByb2ZpbGUub3duZXIpewogICAgICAgICAgICAgICAgICAgIGZvdW5kT3duZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYoIWZvdW5kT3duZXIpewogICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5lcnJvck1zZyA9ICJDYW4gbm90IHJlbW92ZSBvd25lciBmcm9tIGFkbWluLiIKICAgICAgICAgICAgfSBlbHNlIGlmKHRoaXMuaW50ZXJlc3RzLmxlbmd0aCA+IDMwKXsKICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JNc2cgPSAiV2UgY3VycmVudGx5IG9ubHkgYWxsb3cgYSBjb21tdW5pdHkgdG8gaGF2ZSB1cCB0byAzMCBpbnRlcmVzdHMuIgogICAgICAgICAgICB9IGVsc2UgaWYoIXRoaXMucHJvcGVyTmFtZS50ZXN0KHRoaXMubmFtZSkgJiYgdGhpcy5uYW1lICE9PSAnJyl7CiAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmVycm9yTXNnID0gIkludmFsaWQgbmFtaW5nIGZvcm1hdC4gQWxwaGEgY2hhcmFjdGVycyBhbmQgc3BhY2Ugb25seS4iCiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLm1vZGVyYXRvcnMubGVuZ3RoICE9PSB0aGlzLnJlc291cmNlUHJvZmlsZS5tb2RlcmF0b3JzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgnWW91IGFyZSBhYm91dCB0byB1cGRhdGUgbW9kZXJhdG9ycyBhcyBhbiBvd25lci4gQ29udGludWU/JywgJ1dhcm5pbmcnLCB7CiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdPSycsCiAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbCcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgICAgICB9KS50aGVuKGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0ID0gYXdhaXQgdGhpcy51cGRhdGVyZXNvdXJjZVByb2ZpbGUoKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ01vZGVyYXRvcnMgdXBkYXRlIGNhbmNlbGVkJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlcmVzb3VyY2VQcm9maWxlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIHVwZGF0ZXJlc291cmNlUHJvZmlsZSgpIHsKICAgICAgICAgICAgdGhpcy5lcnJvck1zZyA9ICIiOwogICAgICAgICAgICAvLyBjaGVjayBpZiBhbGwgZW1haWxzIGFyZSBhY3R1YWxseSB2YWxpZAogICAgICAgICAgICB0aGlzLmxvb2tlZCA9IGZhbHNlOwogICAgICAgICAgICBjb25zdCB1c2VyUmVmID0gZmIudXNlcnNDb2xsZWN0aW9uOwogICAgICAgICAgICBsZXQgdmFsaWQgPSB0cnVlOwogICAgICAgICAgICBjb25zdCBmaW5hbE1vZHMgPSBbXTsKICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5tb2RlcmF0b3JzLm1hcChhc3luYyAobW9kKSA9PiB7CiAgICAgICAgICAgICAgICBmaW5hbE1vZHMucHVzaChtb2QudGV4dCk7CiAgICAgICAgICAgICAgICBjb25zdCBxdWVyeSAgPSBhd2FpdCB1c2VyUmVmLndoZXJlKCJlbWFpbCIsICI9PSIsIG1vZC50ZXh0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBxdWVyeS5nZXQoKTsKICAgICAgICAgICAgICAgIGlmKHF1ZXJ5U25hcHNob3Quc2l6ZSA9PT0gMCl7CiAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1zZyA9IGBDYW5ub3QgZmluZCB1c2VyIGFzc29jaWF0ZWQgd2l0aCAke21vZC50ZXh0fS5gCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgaWYodmFsaWQpewogICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZVJlc291cmNlUHJvZmlsZScsIHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUgIT09ICcnID8gdGhpcy5uYW1lIDogdGhpcy5yZXNvdXJjZVByb2ZpbGUubmFtZSwKICAgICAgICAgICAgICAgICAgICBydWxlczogdGhpcy5ydWxlcyAhPT0gJycgPyB0aGlzLnJ1bGVzOiB0aGlzLnJlc291cmNlUHJvZmlsZS5ydWxlcywKICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiAhPT0gJycgPyB0aGlzLmRlc2NyaXB0aW9uOiB0aGlzLnJlc291cmNlUHJvZmlsZS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICBjaXR5OiB0aGlzLmNpdHkgIT09ICcnID8gdGhpcy5jaXR5OiB0aGlzLnJlc291cmNlUHJvZmlsZS5jaXR5LAogICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlICE9PSAnJyA/IHRoaXMuc3RhdGU6IHRoaXMucmVzb3VyY2VQcm9maWxlLnN0YXRlLAogICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuY291bnRyeSAhPT0gJycgPyB0aGlzLmNvdW50cnk6IHRoaXMucmVzb3VyY2VQcm9maWxlLmNvdW50cnksCiAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RzOiB0aGlzLnJlc291cmNlUHJvZmlsZS5pbnRlcmVzdHMsCiAgICAgICAgICAgICAgICAgICAgbGluazogdGhpcy5yZXNvdXJjZVByb2ZpbGUubGluaywKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkT246IHRoaXMucmVzb3VyY2VQcm9maWxlLmNyZWF0ZWRPbiwKICAgICAgICAgICAgICAgICAgICBtb2RlcmF0b3JzOiBmaW5hbE1vZHMsCiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcnM6IHRoaXMucmVzb3VyY2VQcm9maWxlLnN1YnNjcmliZXJzLAogICAgICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLnJlc291cmNlUHJvZmlsZS5vd25lciwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLnRpdGxlID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLmNpdHkgPSAnJzsKICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnJzsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3MgPSB0cnVlOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRoaXMuc2hvd1N1Y2Nlc3MgPSBmYWxzZSB9LCAyMDAwKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB2YWxpZDsKICAgICAgICB9LAogICAgICAgIHJlbW92ZUludGVyZXN0KGlkKSB7CiAgICAgICAgICAgIHRoaXMucmVzb3VyY2VQcm9maWxlLmludGVyZXN0cyA9IHRoaXMucmVzb3VyY2VQcm9maWxlLmludGVyZXN0cy5maWx0ZXIodD0+IHQuaWQgIT09IGlkKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVDb21tdW5pdHlJbnRlcmVzdEZpcmViYXNlKCk7CiAgICAgICAgfSwKICAgICAgICBhZGRJbnRlcmVzdChpbnRlcmVzdCkgewogICAgICAgICAgICB0aGlzLnJlc291cmNlUHJvZmlsZS5pbnRlcmVzdHMucHVzaChpbnRlcmVzdCk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29tbXVuaXR5SW50ZXJlc3RGaXJlYmFzZSgpOwogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlQ29tbXVuaXR5KGlkKSB7CiAgICAgICAgICAgIHRoaXMuY29tbXVuaXRpZXMgPSB0aGlzLmNvbW11bml0aWVzLmZpbHRlcih0PT4gdC5pZCAhPT0gaWQpCiAgICAgICAgfSwKICAgICAgICBhZGRDb21tdW5pdHkoY29tbXVuaXR5KSB7CiAgICAgICAgICAgIHRoaXMuY29tbXVuaXRpZXMucHVzaChjb21tdW5pdHkpCiAgICAgICAgfSwKICAgICAgICB1cGRhdGVDb21tdW5pdHlJbnRlcmVzdEZpcmViYXNlKCkgewogICAgICAgICAgICBjb25zdCB1cGRhdGVkSW50ZXJlc3QgPSBbXTsKICAgICAgICAgICAgbGV0IGNvdW50ZXIgPSAwOwogICAgICAgICAgICB0aGlzLnJlc291cmNlUHJvZmlsZS5pbnRlcmVzdHMubWFwKChpbnRlcmVzdCkgPT4gewogICAgICAgICAgICAgICAgdXBkYXRlZEludGVyZXN0LnB1c2goe2lkOmNvdW50ZXIsIHRpdGxlOiBpbnRlcmVzdC50aXRsZSwgY29tcGxldGVkOiBmYWxzZX0pOwogICAgICAgICAgICAgICAgY291bnRlciArPSAxOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZXJlc291cmNlUHJvZmlsZScsIHsKICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMucmVzb3VyY2VQcm9maWxlLm5hbWUsCiAgICAgICAgICAgICAgICBydWxlczogdGhpcy5yZXNvdXJjZVByb2ZpbGUucnVsZXMsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5yZXNvdXJjZVByb2ZpbGUuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICBjaXR5OiAgdGhpcy5yZXNvdXJjZVByb2ZpbGUuY2l0eSwKICAgICAgICAgICAgICAgIHN0YXRlOiB0aGlzLnJlc291cmNlUHJvZmlsZS5zdGF0ZSwKICAgICAgICAgICAgICAgIGNvdW50cnk6IHRoaXMucmVzb3VyY2VQcm9maWxlLmNvdW50cnksCiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IHVwZGF0ZWRJbnRlcmVzdCwKICAgICAgICAgICAgICAgIGNyZWF0ZWRPbjogdGhpcy5yZXNvdXJjZVByb2ZpbGUuY3JlYXRlZE9uLAogICAgICAgICAgICAgICAgc3Vic2NyaWJlcnM6IHRoaXMucmVzb3VyY2VQcm9maWxlLnN1YnNjcmliZXJzLAogICAgICAgICAgICAgICAgbGluazogdGhpcy5yZXNvdXJjZVByb2ZpbGUubGluaywKICAgICAgICAgICAgICAgIG1vZGVyYXRvcnM6IHRoaXMucmVzb3VyY2VQcm9maWxlLm1vZGVyYXRvcnMsCiAgICAgICAgICAgICAgICBvd25lcjogdGhpcy5yZXNvdXJjZVByb2ZpbGUub3duZXIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLnNob3dTdWNjZXNzSW50ID0gdHJ1ZTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnNob3dTdWNjZXNzSW50ID0gZmFsc2UgfSwgMjAwMCkKICAgICAgICB9LAogICAgICAgIHN1YnNjcmliZSgpewogICAgICAgICAgICB0aGlzLnVzZXJQcm9maWxlLmNvbW11bml0aWVzLnB1c2goe2lkOjAsIHRpdGxlOiB0aGlzLnJlc291cmNlUHJvZmlsZS5saW5rLCBjb21wbGV0ZWQ6IGZhbHNlfSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlVXNlclN1YnNjcmlwdGlvbigpOwogICAgICAgIH0sCiAgICAgICAgdW5zdWJzY3JpYmUoKXsKICAgICAgICAgICAgdGhpcy51c2VyUHJvZmlsZS5jb21tdW5pdGllcyA9IHRoaXMudXNlclByb2ZpbGUuY29tbXVuaXRpZXMuZmlsdGVyKHQ9PiB0LnRpdGxlICE9PSB0aGlzLnJlc291cmNlUHJvZmlsZS5saW5rKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVVc2VyU3Vic2NyaXB0aW9uKCk7CiAgICAgICAgfQogICAgICAgICwKICAgICAgICB1cGRhdGVVc2VyU3Vic2NyaXB0aW9uKCkgewogICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29tbXVuaXRpZXMgPSBbXTsKICAgICAgICAgICAgbGV0IGNvdW50ZXIgPSAwOwogICAgICAgICAgICB0aGlzLnVzZXJQcm9maWxlLmNvbW11bml0aWVzLm1hcCgoY29tbXVuaXR5KSA9PiB7CiAgICAgICAgICAgICAgICB1cGRhdGVkQ29tbXVuaXRpZXMucHVzaCh7aWQ6Y291bnRlciwgdGl0bGU6IGNvbW11bml0eS50aXRsZSwgY29tcGxldGVkOiBmYWxzZX0pOwogICAgICAgICAgICAgICAgY291bnRlciArPSAxOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZVByb2ZpbGUnLCB7CiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLnVzZXJQcm9maWxlLm5hbWUsCiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy51c2VyUHJvZmlsZS50aXRsZSwKICAgICAgICAgICAgICAgIGNpdHk6ICB0aGlzLnVzZXJQcm9maWxlLmNpdHksCiAgICAgICAgICAgICAgICBzdGF0ZTogdGhpcy51c2VyUHJvZmlsZS5zdGF0ZSwKICAgICAgICAgICAgICAgIGNvdW50cnk6IHRoaXMudXNlclByb2ZpbGUuY291bnRyeSwKICAgICAgICAgICAgICAgIGludGVyZXN0czogdGhpcy51c2VyUHJvZmlsZS5pbnRlcmVzdHMsCiAgICAgICAgICAgICAgICBjb21tdW5pdGllczogdXBkYXRlZENvbW11bml0aWVzLAogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGNyZWF0ZVBvc3QoKSB7CiAgICAgICAgICAgIGZiLnBvc3RzQ29sbGVjdGlvbi5hZGQoewogICAgICAgICAgICAgICAgY3JlYXRlZE9uOiBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5wb3N0LmNvbnRlbnQsCiAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMuY3VycmVudFVzZXIudWlkLAogICAgICAgICAgICAgICAgdXNlck5hbWU6IHRoaXMudXNlclByb2ZpbGUubmFtZSwKICAgICAgICAgICAgICAgIGNvbW1lbnRzOiAwLAogICAgICAgICAgICAgICAgbGlrZXM6IDAKICAgICAgICAgICAgfSkudGhlbihyZWYgPT4gewogICAgICAgICAgICAgICAgdGhpcy5wb3N0LmNvbnRlbnQgPSAnJwogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2hvd05ld1Bvc3RzKCkgewogICAgICAgICAgICBsZXQgdXBkYXRlZFBvc3RzQXJyYXkgPSB0aGlzLmhpZGRlblBvc3RzLmNvbmNhdCh0aGlzLnBvc3RzKQogICAgICAgICAgICAvLyBjbGVhciBoaWRkZW5Qb3N0cyBhcnJheSBhbmQgdXBkYXRlIHBvc3RzIGFycmF5CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0SGlkZGVuUG9zdHMnLCBudWxsKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFBvc3RzJywgdXBkYXRlZFBvc3RzQXJyYXkpCiAgICAgICAgfSwKICAgICAgICBvcGVuQ29tbWVudE1vZGFsKHBvc3QpIHsKICAgICAgICAgICAgdGhpcy5jb21tZW50LnBvc3RJZCA9IHBvc3QuaWQKICAgICAgICAgICAgdGhpcy5jb21tZW50LnVzZXJJZCA9IHBvc3QudXNlcklkCiAgICAgICAgICAgIHRoaXMuY29tbWVudC5wb3N0Q29tbWVudHMgPSBwb3N0LmNvbW1lbnRzCiAgICAgICAgICAgIHRoaXMuc2hvd0NvbW1lbnRNb2RhbCA9IHRydWUKICAgICAgICB9LAogICAgICAgIGNsb3NlQ29tbWVudE1vZGFsKCkgewogICAgICAgICAgICB0aGlzLmNvbW1lbnQucG9zdElkID0gJycKICAgICAgICAgICAgdGhpcy5jb21tZW50LnVzZXJJZCA9ICcnCiAgICAgICAgICAgIHRoaXMuY29tbWVudC5jb250ZW50ID0gJycKICAgICAgICAgICAgdGhpcy5zaG93Q29tbWVudE1vZGFsID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIGFkZENvbW1lbnQoKSB7CiAgICAgICAgICAgIGxldCBwb3N0SWQgPSB0aGlzLmNvbW1lbnQucG9zdElkCiAgICAgICAgICAgIGxldCBwb3N0Q29tbWVudHMgPSB0aGlzLmNvbW1lbnQucG9zdENvbW1lbnRzCiAgICAgICAgICAgIGZiLmNvbW1lbnRzQ29sbGVjdGlvbi5hZGQoewogICAgICAgICAgICAgICAgY3JlYXRlZE9uOiBuZXcgRGF0ZSgpLAogICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5jb21tZW50LmNvbnRlbnQsCiAgICAgICAgICAgICAgICBwb3N0SWQ6IHBvc3RJZCwKICAgICAgICAgICAgICAgIHVzZXJJZDogdGhpcy5jdXJyZW50VXNlci51aWQsCiAgICAgICAgICAgICAgICB1c2VyTmFtZTogdGhpcy51c2VyUHJvZmlsZS5uYW1lCiAgICAgICAgICAgIH0pLnRoZW4oZG9jID0+IHsKICAgICAgICAgICAgICAgIGZiLnBvc3RzQ29sbGVjdGlvbi5kb2MocG9zdElkKS51cGRhdGUoewogICAgICAgICAgICAgICAgICAgIGNvbW1lbnRzOiBwb3N0Q29tbWVudHMgKyAxCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlQ29tbWVudE1vZGFsKCkKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBsaWtlUG9zdChwb3N0SWQsIHBvc3RMaWtlcykgewogICAgICAgICAgICBsZXQgZG9jSWQgPSBgJHt0aGlzLmN1cnJlbnRVc2VyLnVpZH1fJHtwb3N0SWR9YAogICAgICAgICAgICBmYi5saWtlc0NvbGxlY3Rpb24uZG9jKGRvY0lkKS5nZXQoKS50aGVuKGRvYyA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZG9jLmV4aXN0cykgeyByZXR1cm4gfQogICAgICAgICAgICAgICAgZmIubGlrZXNDb2xsZWN0aW9uLmRvYyhkb2NJZCkuc2V0KHsKICAgICAgICAgICAgICAgICAgICBwb3N0SWQ6IHBvc3RJZCwKICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMuY3VycmVudFVzZXIudWlkCiAgICAgICAgICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgcG9zdCBsaWtlcwogICAgICAgICAgICAgICAgICAgIGZiLnBvc3RzQ29sbGVjdGlvbi5kb2MocG9zdElkKS51cGRhdGUoewogICAgICAgICAgICAgICAgICAgICAgICBsaWtlczogcG9zdExpa2VzICsgMQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgdmlld1Bvc3QocG9zdCkgewogICAgICAgICAgICBmYi5jb21tZW50c0NvbGxlY3Rpb24ud2hlcmUoJ3Bvc3RJZCcsICc9PScsIHBvc3QuaWQpLmdldCgpLnRoZW4oZG9jcyA9PiB7CiAgICAgICAgICAgICAgICBsZXQgY29tbWVudHNBcnJheSA9IFtdCiAgICAgICAgICAgICAgICBkb2NzLmZvckVhY2goZG9jID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgY29tbWVudCA9IGRvYy5kYXRhKCkKICAgICAgICAgICAgICAgICAgICBjb21tZW50LmlkID0gZG9jLmlkCiAgICAgICAgICAgICAgICAgICAgY29tbWVudHNBcnJheS5wdXNoKGNvbW1lbnQpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgdGhpcy5wb3N0Q29tbWVudHMgPSBjb21tZW50c0FycmF5CiAgICAgICAgICAgICAgICB0aGlzLmZ1bGxQb3N0ID0gcG9zdAogICAgICAgICAgICAgICAgdGhpcy5zaG93UG9zdE1vZGFsID0gdHJ1ZQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgY2xvc2VQb3N0TW9kYWwoKSB7CiAgICAgICAgICAgIHRoaXMucG9zdENvbW1lbnRzID0gW10KICAgICAgICAgICAgdGhpcy5zaG93UG9zdE1vZGFsID0gZmFsc2UKICAgICAgICB9LAogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBWdWVwZXJTbGlkZXMsCiAgICAgICAgVnVlcGVyU2xpZGUsCiAgICAgICAgTGlzdEludGVyZXN0cywKICAgICAgICBBZGRJbnRlcmVzdCwKICAgICAgICBBZGRDb21tdW5pdHksCiAgICAgICAgTGlzdENvbW11bml0aWVzLAogICAgICAgIFZ1ZVRhZ3NJbnB1dH0sCiAgICBmaWx0ZXJzOiB7CiAgICAgICAgZm9ybWF0RGF0ZSh2YWwpIHsKICAgICAgICAgICAgaWYgKCF2YWwpIHsgcmV0dXJuICctJyB9CiAgICAgICAgICAgIGxldCBkYXRlID0gdmFsLnRvRGF0ZSgpCiAgICAgICAgICAgIHJldHVybiBtb21lbnQoZGF0ZSkuZnJvbU5vdygpCiAgICAgICAgfSwKICAgICAgICB0cmltTGVuZ3RoKHZhbCkgewogICAgICAgICAgICBpZiAodmFsLmxlbmd0aCA8IDIwMCkgeyByZXR1cm4gdmFsIH0KICAgICAgICAgICAgcmV0dXJuIGAke3ZhbC5zdWJzdHJpbmcoMCwgMjAwKX0uLi5gCiAgICAgICAgfQogICAgfQoKfQo="},{"version":3,"sources":["Resource.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Resource.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div id=\"resource\" >\r\n        <transition name=\"fade\">\r\n            <div v-if=\"!looked\" class=\"loading\">\r\n                <p>Loading..</p>\r\n            </div>\r\n        </transition>\r\n        <div v-if=\"resourceProfile\">\r\n            <div class=\"commBanner\" v-if=\"resourceProfile\">\r\n                <h1><span>{{resourceProfile.name}}</span></h1>\r\n            </div>\r\n\r\n            <div class=\"navInterests\" v-if=\"resourceProfile\">\r\n                <el-menu class=\"el-menu\"\r\n                         mode=\"horizontal\"\r\n                         background-color=\"#5A61A6\"\r\n                         text-color=\"#fff\"\r\n                         active-text-color=\"#ffd04b\"\r\n                         @select=\"handleSelect\">\r\n                         <el-menu-item index=\"#home\" style=\" color: #FFFFFF\"  ><i   class=\"el-icon-s-home\" style=\"color: #FFFFFF\"></i>Resource</el-menu-item>\r\n                         <el-menu-item index=\"#about\" style=\" color: #FFFFFF\"  ><i   class=\"el-icon-notebook-2\" style=\"color: #FFFFFF\"></i>Questions and Answers</el-menu-item>\r\n                    \r\n                    \r\n<!--                    <el-menu-item index=\"#about\" style=\" color: #FFFFFF\"  ><i class=\"el-icon-notebook-2\"  style=\"color: #FFFFFF\"></i>About</el-menu-item>-->\r\n<!--                    <el-menu-item index=\"#admin\" style=\" color: #FFFFFF\" v-if=\"admin\" ><i class=\"el-icon-s-custom\"  style=\"color: #FFFFFF\"></i>Admin</el-menu-item>-->\r\n<!--                    <el-menu-item index=\"#subscribe\" style=\" color: #FFFFFF;\" v-if=\"userProfile.name !== undefined && !subscribed\"><i class=\"el-icon-message-solid\"  style=\"color: #FFFFFF\"></i>Subscribe</el-menu-item>-->\r\n<!--                    <el-menu-item index=\"#unsubscribe\" style=\" color: #FFFFFF\" v-if=\"userProfile.name !== undefined && subscribed\"><i class=\"el-icon-close-notification\"  style=\"color: #FFFFFF\"></i>Unsubscribe</el-menu-item>-->\r\n                </el-menu>\r\n            </div>\r\n            <div v-if=\"home\">\r\n                <!--resource home page-->\r\n                <div class=\"communityGuidelines\" v-if=\"resourceProfile\">\r\n                    <div class=\"description\" v-if=\"resourceProfile\">\r\n                        <p><span>{{ resourceProfile.description }}</span></p>\r\n                    </div>\r\n                    <!-- <div class=\"commDetails\" v-if=\"resourceProfile\">\r\n                        <div class=\"rules\">\r\n                            <h3>Resource Rules</h3>\r\n                            <p><span>{{ resourceProfile.rules }}</span></p>\r\n                        </div>\r\n                    </div> -->\r\n                    <div class=\"recCategories\">\r\n                    <h1>Related Resources</h1>\r\n                </div>\r\n                <vueper-slides\r\n                        class=\"no-shadow\"\r\n                        :visible-slides=\"3\"\r\n                        slide-multiple\r\n                        :arrows=\"false\"\r\n                        :gap=\"3\"\r\n                        :slide-ratio=\"1 / 8\"\r\n                        :dragging-distance=\"200\"\r\n                        :breakpoints=\"{ 1200: { slideRatio: 1 / 5 },800: { visibleSlides: 2, slideMultiple: 2, slideRatio:1/3 }, 600: { visibleSlides: 1, slideMultiple: 2, slideRatio:1/2 } }\">\r\n                    <vueper-slide v-for=\"(slide, i) in slides_recc\"\r\n                                  :key=\"i\"\r\n                                  :title=\"slide.title\"\r\n                                  :content=\"slide.content\"\r\n                                  :style=\"'background-color: ' + ['#C3C7E7', '#C3C7E7'][i % 2]\" />\r\n                </vueper-slides>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"question\" v-if=\"about\">\r\n                <section>\r\n                    <div class=\"col1\">\r\n                        <div class=\"profile\">\r\n                            <h5>{{ userProfile.name }}</h5>\r\n                            <p>{{ userProfile.title }}</p>\r\n                            <div class=\"create-post\">\r\n                                <p>create a post</p>\r\n                                <form @submit.prevent>\r\n                                    <textarea v-model.trim=\"post.content\"></textarea>\r\n                                    <button @click=\"createPost\" :disabled=\"post.content == ''\" class=\"button\">post</button>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col2\">\r\n                        <transition name=\"fade\">\r\n                            <div v-if=\"hiddenPosts.length\" @click=\"showNewPosts\" class=\"hidden-posts\">\r\n                                <p>\r\n                                    Click to show <span class=\"new-posts\">{{ hiddenPosts.length }}</span>\r\n                                    new <span v-if=\"hiddenPosts.length > 1\">posts</span><span v-else>post</span>\r\n                                </p>\r\n                            </div>\r\n                        </transition>\r\n                        <div v-if=\"posts.length\">\r\n                            <div v-for=\"post in posts\" class=\"post\">\r\n                                <h5>{{ post.userName }}</h5>\r\n                                <span>{{ post.createdOn | formatDate }}</span>\r\n                                <p>{{ post.content | trimLength }}</p>\r\n                                <ul>\r\n                                    <li><a @click=\"openCommentModal(post)\">comments {{ post.comments }}</a></li>\r\n                                    <li><a @click=\"likePost(post.id, post.likes)\">likes {{ post.likes }}</a></li>\r\n                                    <li><a @click=\"viewPost(post)\">view full post</a></li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div v-else>\r\n                            <p class=\"no-results\">There are currently no posts</p>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <!-- comment modal -->\r\n                <transition name=\"fade\">\r\n                    <div v-if=\"showCommentModal\" class=\"c-modal\">\r\n                        <div class=\"c-container\">\r\n                            <a @click=\"closeCommentModal\">X</a>\r\n                            <p>add a comment</p>\r\n                            <form @submit.prevent>\r\n                                <textarea v-model.trim=\"comment.content\"></textarea>\r\n                                <button @click=\"addComment\" :disabled=\"comment.content == ''\" class=\"button\">add comment</button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </transition>\r\n\r\n                <!-- post modal -->\r\n                <transition name=\"fade\">\r\n                    <div v-if=\"showPostModal\" class=\"p-modal\">\r\n                        <div class=\"p-container\">\r\n                            <a @click=\"closePostModal\" class=\"close\">X</a>\r\n                            <div class=\"post\">\r\n                                <h5>{{ fullPost.userName }}</h5>\r\n                                <span>{{ fullPost.createdOn | formatDate }}</span>\r\n                                <p>{{ fullPost.content }}</p>\r\n                                <ul>\r\n                                    <li><a>comments {{ fullPost.comments }}</a></li>\r\n                                    <li><a>likes {{ fullPost.likes }}</a></li>\r\n                                </ul>\r\n                            </div>\r\n                            <div v-show=\"postComments.length\" class=\"comments\">\r\n                                <div v-for=\"comment in postComments\" class=\"comment\">\r\n                                    <p>{{ comment.userName }}</p>\r\n                                    <span>{{ comment.createdOn | formatDate }}</span>\r\n                                    <p>{{ comment.content }}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </transition>\r\n            </div>\r\n\r\n\r\n            <div v-if=\"about\">\r\n\r\n            </div>\r\n            <div v-if=\"adminSelect\">\r\n                <div>\r\n                    <section>\r\n                        <div class=\"col1\">\r\n                            <div class=\"profile\">\r\n                                <!--                                <img height=\"150px\" width=\"150px\" src=\"../assets/user_icon.png\"/>-->\r\n                                <h5 style=\"float: right; margin-top: 20px;\">{{ resourceProfile.name }}</h5>\r\n                                <form @submit.prevent>\r\n                                    <p style=\" margin-top: 20px;\">\r\n                                        Name:<input v-model.trim=\"name\" type=\"text\" :placeholder=\"resourceProfile.name\" id=\"name\" />\r\n                                    </p>\r\n                                    <p>\r\n                                        Description:<el-input\r\n                                            type=\"textarea\"\r\n                                            :placeholder=\"resourceProfile.description\"\r\n                                            v-model=\"description\"\r\n                                            maxlength=\"500\"\r\n                                            show-word-limit\r\n                                    >\r\n                                    </el-input>\r\n                                    </p>\r\n                                    <p>\r\n                                        Rules:<el-input\r\n                                            type=\"textarea\"\r\n                                            :placeholder=\"resourceProfile.rules\"\r\n                                            v-model=\"rules\"\r\n                                            maxlength=\"500\"\r\n                                            show-word-limit\r\n                                    >\r\n                                    </el-input>\r\n                                    </p>\r\n                                    <p>\r\n                                        Owner:<input v-model.trim=\"newOwner\" type=\"text\" :placeholder=\"resourceProfile.owner\" id=\"Owner\">\r\n                                    </p>\r\n                                    <p v-if=\"owner\">\r\n                                        Moderators: <vue-tags-input\r\n                                            v-model=\"moderator\"\r\n                                            :tags=\"moderators\"\r\n                                            :validation=\"validation\"\r\n                                            placeholder=\"Add moderators by emails\"\r\n                                            @tags-changed=\"newTags => moderators = newTags\"\r\n                                    />\r\n                                    </p>\r\n                                    <p>\r\n                                        City:<input v-model.trim=\"city\" type=\"text\" :placeholder=\"resourceProfile.city\" id=\"city\">\r\n                                    </p>\r\n                                    <p>\r\n                                        State:<input v-model.trim=\"state\" type=\"text\" :placeholder=\"resourceProfile.state\" id=\"state\">\r\n                                    </p>\r\n                                    <p>\r\n                                        Country:<input v-model.trim=\"country\" type=\"text\" :placeholder=\"resourceProfile.country\" id=\"country\">\r\n                                    </p>\r\n                                    <button @click=\"errorCheck\" class=\"button\">Update Resource Profile</button>\r\n\r\n                                    <el-alert\r\n                                            title=\"Your changes has been saved.\"\r\n                                            type=\"success\"\r\n                                            v-if=\"showSuccess\">\r\n                                    </el-alert>\r\n                                </form>\r\n                                <transition name=\"fade\">\r\n                                    <div v-if=\"errorMsg !== ''\" class=\"error-msg\">\r\n                                        <p>{{ errorMsg }}</p>\r\n                                    </div>\r\n                                </transition>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col2\">\r\n                            <div class=\"user-form\">\r\n                                <h5 style=\" margin-bottom: 20px;\">Community Interests</h5>\r\n\r\n                                <ListInterests v-bind:interests=\"resourceProfile.interests\"\r\n                                               @remove-interest=\"removeInterest\" v-if=\"currentInterestLen\"\r\n                                />\r\n                                <p class=\"emptylist\" v-else>How lonely... try adding an interest.</p>\r\n                                <AddInterest @add-interest=\"addInterest\"/>\r\n                                <el-alert\r\n                                        title=\"Your changes has been saved.\"\r\n                                        type=\"success\"\r\n                                        v-if=\"showSuccessInt\">\r\n                                </el-alert>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n        <div class=\"commBanner\" v-if=\"!resourceProfile && looked\">\r\n            <h1 align=\"center\">Community Not Found</h1>\r\n        </div>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import { mapState } from 'vuex'\r\n    import moment from 'moment'\r\n    import { VueperSlides, VueperSlide } from 'vueperslides'\r\n    import 'vueperslides/dist/vueperslides.css'\r\n    const fb = require('../firebaseConfig.js');\r\n    import VueTagsInput from '@johmun/vue-tags-input';\r\n    import ListInterests from \"@/components/ListInterests\"\r\n    import ListCommunities from \"@/components/ListCommunities\";\r\n    import AddInterest from \"@/components/AddInterest\"\r\n    import AddCommunity from \"@/components/AddCommunity\";\r\n    export default {\r\n        beforeCreate() {\r\n            this.looked = false;\r\n            this.$store.commit('setResourceProfile', false);\r\n            this.$store.commit('setCurrentResource', this.$route.params.id);\r\n            this.$store.dispatch('fetchResourceProfile');\r\n\r\n        },\r\n        beforeUpdate() {\r\n            this.looked = true;\r\n            // if logged in, find if the user is a owner and or moderator\r\n            if(this.userProfile.name !== undefined){\r\n                if(this.resourceProfile.owner === this.userProfile.email){\r\n                    this.owner = true;\r\n                }\r\n                if(this.resourceProfile.moderators.indexOf(this.userProfile.email) !== -1){\r\n                    this.admin = true;\r\n                }\r\n                this.userProfile.communities.map((com)=>{\r\n                    if (com.title !== undefined){\r\n                        if(com.title === this.resourceProfile.link){\r\n                            this.subscribed = true;\r\n                        }\r\n                    }\r\n                });\r\n                if(!this.loadedMod){\r\n                    this.moderators = this.resourceProfile.moderators.map((mod)=> {\r\n                        return {text: mod}\r\n                    });\r\n                    this.loadedMod = true;\r\n                }\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapState(['resourceProfile', 'userProfile', 'currentUser', 'posts', 'hiddenPosts']),\r\n            currentInterestLen(state) {\r\n                // return state.userProfile.interests.length;\r\n                return 4;\r\n            }\r\n        },\r\n        data(){\r\n            return{\r\n                post: {\r\n                    content: ''\r\n                },\r\n                comment: {\r\n                    postId: '',\r\n                    userId: '',\r\n                    content: '',\r\n                    postComments: 0\r\n                },\r\n                showCommentModal: false,\r\n                showPostModal: false,\r\n                fullPost: {},\r\n                postComments: [],\r\n                slides: [\r\n                    {\r\n                        id: 'slide-0',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Food Assistance</b>',\r\n                        content: 'This is the Food Assistance intererst.'+\r\n                            '<br><br><button @click=\"foodAssistance_card\"  class=\"button\">View</button>'\r\n                    },\r\n                    {\r\n                        id: 'slide-1',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Health Care</b>',\r\n                        content: 'This is the Healthcare interest.'+\r\n                            '<br><br><button @click=\"healthcare_card\"  class=\"button\">View</button>'\r\n                    },\r\n                    {\r\n                        id: 'slide-2',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Education</b>',\r\n                        content: 'This is the Education Interest.'+\r\n                            '<br><br><button @click=\"education_card\"  class=\"button\">View</button>'\r\n                    },\r\n                    {\r\n                        id: 'slide-3',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Legal Assistance</b>',\r\n                        content: 'This is the Legal Assistance.'+\r\n                            '<br><br><button @click=\"legalAssistance_card\"  class=\"button\">View</button>'\r\n                    }\r\n                ],\r\n                slides_recc: [\r\n                    {\r\n                        id: 'slide-0',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 1</b>',\r\n                        content: 'This is a description'+\r\n                            '<br><br><button @click=\"recc1_card\"  class=\"button\">View</button>'\r\n\r\n                    },\r\n                    {\r\n                        id: 'slide-1',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 2</b>',\r\n                        content: 'This is a description'+\r\n                            '<br><br><button @click=\"recc2_card\"  class=\"button\">View</button>'\r\n                    },\r\n                    {\r\n                        id: 'slide-2',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 3</b>',\r\n                        content: 'This is a description'+\r\n                            '<br><br><button @click=\"recc3_card\"  class=\"button\">View</button>'\r\n                    },\r\n                    {\r\n                        id: 'slide-3',\r\n                        title: '<b style=\"font-size: 1.3em;color: \">Recommended Category 4</b>',\r\n                        content: 'This is a description'+\r\n                            '<br><br><button @click=\"recc4_card\"  class=\"button\">View</button>'\r\n                    }\r\n                ],\r\n                subscribed: false,\r\n                loadedMod: false,\r\n                newOwner: '',\r\n                looked: false,\r\n                home: true,\r\n                resources: false,\r\n                postInfo: false,\r\n                about: false,\r\n                admin: false,\r\n                adminSelect: false,\r\n                owner: false,\r\n                properName: /^[a-zA-Z]+(([\\',. -][a-zA-Z ])?[a-zA-Z]*)*$/,\r\n                name: '',\r\n                title: '',\r\n                city: '',\r\n                state: '',\r\n                country: '',\r\n                rules: '',\r\n                description: '',\r\n                errorMsg: '',\r\n                moderator: '',\r\n                moderators: [],\r\n                showSuccess: false,\r\n                showSuccessInt: false,\r\n                interests: [\r\n                ],\r\n                communities: [\r\n                ],\r\n                validation: [{\r\n                    classes: 'valid-email',\r\n                    rule: /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/,\r\n                    disableAdd: true,\r\n                }],\r\n                userInfo: \"User 12345\",\r\n                postDate: \"April 20, 2018\",\r\n                postTitle: \"Food Drive at Westfield Food Bank\",\r\n                postDesc: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\",\r\n                postVotes: 68,\r\n                sortby: [\"Food\", \"Education\", \"Documentation\",\"Healthcare\"],\r\n                cards: [{title: \"Food Drive at Westfield Food Bank\",\r\n                    description: \"stuff\", votes: 68, date: \"April 20, 2018\", user: \"User 12345\"},{title: \"Food Drive at Westfield Food Bank\",\r\n                    description: \"stuff\", votes: 68, date: \"April 20, 2018\", user: \"User 6789\"}]\r\n\r\n            }\r\n        },\r\n        methods: {\r\n            handleSelect(key, keyPath) {\r\n                // console.log(key, keyPath);\r\n                if(key === '#home'){\r\n                    this.home = true;\r\n                    this.resources = false;\r\n                    this.about = false;\r\n                    this.adminSelect = false;\r\n                    this.postInfo = false;\r\n                }\r\n                // else if() {\r\n                    \r\n                // }\r\n                else if(key === '#resources') {\r\n                    this.home = false;\r\n                    this.resources = true;\r\n                    this.about = false;\r\n                    this.adminSelect = false;\r\n                    this.postInfo = false;\r\n                    if(key === '#postInfo') {\r\n                        this.resources = false;\r\n                        this.postInfo = true;\r\n                    }\r\n                }\r\n                else if(key === '#about') {\r\n                    this.home = false;\r\n                    this.resources = false;\r\n                    this.about = true;\r\n                    this.adminSelect = false;\r\n                    this.postInfo = false;\r\n                } else if(key === '#admin'){\r\n                    this.home = false;\r\n                    this.resources = false;\r\n                    this.about = false;\r\n                    this.adminSelect = true;\r\n                    this.postInfo = false;\r\n                } else if(key === '#subscribe'){\r\n                    this.subscribed = true;\r\n                    this.subscribe()\r\n                } else if(key === '#unsubscribe'){\r\n                    this.subscribed = false;\r\n                    this.unsubscribe();\r\n                }\r\n            },\r\n            errorCheck(){\r\n                let error = false;\r\n                let foundOwner = false;\r\n                this.moderators.map((mod) => {\r\n                    if(mod.text === this.resourceProfile.owner){\r\n                        foundOwner = true;\r\n                    }\r\n                });\r\n                if(!foundOwner){\r\n                    error = true;\r\n                    this.errorMsg = \"Can not remove owner from admin.\"\r\n                } else if(this.interests.length > 30){\r\n                    error = true;\r\n                    this.errorMsg = \"We currently only allow a community to have up to 30 interests.\"\r\n                } else if(!this.properName.test(this.name) && this.name !== ''){\r\n                    error = true;\r\n                    this.errorMsg = \"Invalid naming format. Alpha characters and space only.\"\r\n                } else if(this.moderators.length !== this.resourceProfile.moderators.length) {\r\n                    this.$confirm('You are about to update moderators as an owner. Continue?', 'Warning', {\r\n                        confirmButtonText: 'OK',\r\n                        cancelButtonText: 'Cancel',\r\n                        type: 'warning'\r\n                    }).then(async () => {\r\n                        const stat = await this.updateresourceProfile();\r\n                    }).catch(() => {\r\n                        error = true;\r\n                        this.$message({\r\n                            type: 'info',\r\n                            message: 'Moderators update canceled'\r\n                        });\r\n                    })\r\n                } else {\r\n                    this.updateresourceProfile();\r\n                }\r\n            },\r\n            async updateresourceProfile() {\r\n                this.errorMsg = \"\";\r\n                // check if all emails are actually valid\r\n                this.looked = false;\r\n                const userRef = fb.usersCollection;\r\n                let valid = true;\r\n                const finalMods = [];\r\n                await Promise.all(this.moderators.map(async (mod) => {\r\n                    finalMods.push(mod.text);\r\n                    const query  = await userRef.where(\"email\", \"==\", mod.text);\r\n                    const querySnapshot = await query.get();\r\n                    if(querySnapshot.size === 0){\r\n                        valid = false;\r\n                        this.looked = true;\r\n                        this.errorMsg = `Cannot find user associated with ${mod.text}.`\r\n                    }\r\n                }));\r\n                if(valid){\r\n                    await this.$store.dispatch('updateResourceProfile', {\r\n                        name: this.name !== '' ? this.name : this.resourceProfile.name,\r\n                        rules: this.rules !== '' ? this.rules: this.resourceProfile.rules,\r\n                        description: this.description !== '' ? this.description: this.resourceProfile.description,\r\n                        city: this.city !== '' ? this.city: this.resourceProfile.city,\r\n                        state: this.state !== '' ? this.state: this.resourceProfile.state,\r\n                        country: this.country !== '' ? this.country: this.resourceProfile.country,\r\n                        interests: this.resourceProfile.interests,\r\n                        link: this.resourceProfile.link,\r\n                        createdOn: this.resourceProfile.createdOn,\r\n                        moderators: finalMods,\r\n                        subscribers: this.resourceProfile.subscribers,\r\n                        owner: this.resourceProfile.owner,\r\n                    });\r\n                    this.name = '';\r\n                    this.title = '';\r\n                    this.city = '';\r\n                    this.state = '';\r\n                    this.showSuccess = true;\r\n                    setTimeout(() => { this.showSuccess = false }, 2000)\r\n                }\r\n                return valid;\r\n            },\r\n            removeInterest(id) {\r\n                this.resourceProfile.interests = this.resourceProfile.interests.filter(t=> t.id !== id);\r\n                this.updateCommunityInterestFirebase();\r\n            },\r\n            addInterest(interest) {\r\n                this.resourceProfile.interests.push(interest);\r\n                this.updateCommunityInterestFirebase();\r\n            },\r\n            removeCommunity(id) {\r\n                this.communities = this.communities.filter(t=> t.id !== id)\r\n            },\r\n            addCommunity(community) {\r\n                this.communities.push(community)\r\n            },\r\n            updateCommunityInterestFirebase() {\r\n                const updatedInterest = [];\r\n                let counter = 0;\r\n                this.resourceProfile.interests.map((interest) => {\r\n                    updatedInterest.push({id:counter, title: interest.title, completed: false});\r\n                    counter += 1;\r\n                });\r\n                this.$store.dispatch('updateresourceProfile', {\r\n                    name: this.resourceProfile.name,\r\n                    rules: this.resourceProfile.rules,\r\n                    description: this.resourceProfile.description,\r\n                    city:  this.resourceProfile.city,\r\n                    state: this.resourceProfile.state,\r\n                    country: this.resourceProfile.country,\r\n                    interests: updatedInterest,\r\n                    createdOn: this.resourceProfile.createdOn,\r\n                    subscribers: this.resourceProfile.subscribers,\r\n                    link: this.resourceProfile.link,\r\n                    moderators: this.resourceProfile.moderators,\r\n                    owner: this.resourceProfile.owner,\r\n                });\r\n                this.showSuccessInt = true;\r\n\r\n                setTimeout(() => { this.showSuccessInt = false }, 2000)\r\n            },\r\n            subscribe(){\r\n                this.userProfile.communities.push({id:0, title: this.resourceProfile.link, completed: false});\r\n                this.updateUserSubscription();\r\n            },\r\n            unsubscribe(){\r\n                this.userProfile.communities = this.userProfile.communities.filter(t=> t.title !== this.resourceProfile.link);\r\n                this.updateUserSubscription();\r\n            }\r\n            ,\r\n            updateUserSubscription() {\r\n                const updatedCommunities = [];\r\n                let counter = 0;\r\n                this.userProfile.communities.map((community) => {\r\n                    updatedCommunities.push({id:counter, title: community.title, completed: false});\r\n                    counter += 1;\r\n                });\r\n                this.$store.dispatch('updateProfile', {\r\n                    name: this.userProfile.name,\r\n                    title: this.userProfile.title,\r\n                    city:  this.userProfile.city,\r\n                    state: this.userProfile.state,\r\n                    country: this.userProfile.country,\r\n                    interests: this.userProfile.interests,\r\n                    communities: updatedCommunities,\r\n                });\r\n            },\r\n            createPost() {\r\n                fb.postsCollection.add({\r\n                    createdOn: new Date(),\r\n                    content: this.post.content,\r\n                    userId: this.currentUser.uid,\r\n                    userName: this.userProfile.name,\r\n                    comments: 0,\r\n                    likes: 0\r\n                }).then(ref => {\r\n                    this.post.content = ''\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                })\r\n            },\r\n            showNewPosts() {\r\n                let updatedPostsArray = this.hiddenPosts.concat(this.posts)\r\n                // clear hiddenPosts array and update posts array\r\n                this.$store.commit('setHiddenPosts', null)\r\n                this.$store.commit('setPosts', updatedPostsArray)\r\n            },\r\n            openCommentModal(post) {\r\n                this.comment.postId = post.id\r\n                this.comment.userId = post.userId\r\n                this.comment.postComments = post.comments\r\n                this.showCommentModal = true\r\n            },\r\n            closeCommentModal() {\r\n                this.comment.postId = ''\r\n                this.comment.userId = ''\r\n                this.comment.content = ''\r\n                this.showCommentModal = false\r\n            },\r\n            addComment() {\r\n                let postId = this.comment.postId\r\n                let postComments = this.comment.postComments\r\n                fb.commentsCollection.add({\r\n                    createdOn: new Date(),\r\n                    content: this.comment.content,\r\n                    postId: postId,\r\n                    userId: this.currentUser.uid,\r\n                    userName: this.userProfile.name\r\n                }).then(doc => {\r\n                    fb.postsCollection.doc(postId).update({\r\n                        comments: postComments + 1\r\n                    }).then(() => {\r\n                        this.closeCommentModal()\r\n                    })\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                })\r\n            },\r\n            likePost(postId, postLikes) {\r\n                let docId = `${this.currentUser.uid}_${postId}`\r\n                fb.likesCollection.doc(docId).get().then(doc => {\r\n                    if (doc.exists) { return }\r\n                    fb.likesCollection.doc(docId).set({\r\n                        postId: postId,\r\n                        userId: this.currentUser.uid\r\n                    }).then(() => {\r\n                        // update post likes\r\n                        fb.postsCollection.doc(postId).update({\r\n                            likes: postLikes + 1\r\n                        })\r\n                    })\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                })\r\n            },\r\n            viewPost(post) {\r\n                fb.commentsCollection.where('postId', '==', post.id).get().then(docs => {\r\n                    let commentsArray = []\r\n                    docs.forEach(doc => {\r\n                        let comment = doc.data()\r\n                        comment.id = doc.id\r\n                        commentsArray.push(comment)\r\n                    })\r\n                    this.postComments = commentsArray\r\n                    this.fullPost = post\r\n                    this.showPostModal = true\r\n                }).catch(err => {\r\n                    console.log(err)\r\n                })\r\n            },\r\n            closePostModal() {\r\n                this.postComments = []\r\n                this.showPostModal = false\r\n            },\r\n        },\r\n        components: {\r\n            VueperSlides,\r\n            VueperSlide,\r\n            ListInterests,\r\n            AddInterest,\r\n            AddCommunity,\r\n            ListCommunities,\r\n            VueTagsInput},\r\n        filters: {\r\n            formatDate(val) {\r\n                if (!val) { return '-' }\r\n                let date = val.toDate()\r\n                return moment(date).fromNow()\r\n            },\r\n            trimLength(val) {\r\n                if (val.length < 200) { return val }\r\n                return `${val.substring(0, 200)}...`\r\n            }\r\n        }\r\n\r\n    }\r\n</script>\r\n"]}]}